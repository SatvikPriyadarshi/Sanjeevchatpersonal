{"ast":null,"code":"var _jsxFileName = \"D:\\\\Sanjeevchatpersonal\\\\frontend\\\\src\\\\components\\\\ChatRoom.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { useSocket } from \"../contexts/SocketContext\";\nimport { useChat } from \"../contexts/ChatContext\";\nimport { useTheme } from \"../contexts/ThemeContext\";\nimport { FaSun, FaMoon, FaArrowLeft, FaPaperPlane, FaUsers, FaEdit, FaTrash, FaBroom, FaCheck, FaTimes, FaSmile, FaImage, FaReply, FaHeart, FaCopy, FaShare, FaStar, FaThumbtack, FaInfoCircle, FaQuoteLeft, FaLanguage, FaSave, FaFlag, FaShareAlt } from \"react-icons/fa\";\nimport { getAvatarImage } from \"../utils/avatarUtils\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Container = styled.div`\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  background: ${props => props.theme.isDark ? \"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)\" : \"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)\"};\n  color: ${props => props.theme.isDark ? \"#ffffff\" : \"#333333\"};\n  transition: all 0.3s ease;\n  position: relative;\n\n  &::before {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: ${props => props.theme.isDark ? \"radial-gradient(circle at 20% 80%, rgba(0, 123, 255, 0.1) 0%, transparent 50%), radial-gradient(circle at 80% 20%, rgba(40, 167, 69, 0.1) 0%, transparent 50%)\" : \"radial-gradient(circle at 20% 80%, rgba(0, 123, 255, 0.05) 0%, transparent 50%), radial-gradient(circle at 80% 20%, rgba(40, 167, 69, 0.05) 0%, transparent 50%)\"};\n    pointer-events: none;\n    z-index: 0;\n  }\n\n  > * {\n    position: relative;\n    z-index: 1;\n  }\n`;\n_c = Container;\nconst Header = styled.div`\n  background: ${props => props.theme.isDark ? \"linear-gradient(135deg, rgba(45, 45, 45, 0.95) 0%, rgba(60, 60, 60, 0.95) 100%)\" : \"linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 249, 250, 0.95) 100%)\"};\n  backdrop-filter: blur(20px);\n  padding: 20px 25px;\n  border-bottom: 1px solid\n    ${props => props.theme.isDark ? \"rgba(68, 68, 68, 0.5)\" : \"rgba(224, 224, 224, 0.5)\"};\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  box-shadow: ${props => props.theme.isDark ? \"0 8px 32px rgba(0, 0, 0, 0.3), 0 2px 8px rgba(0, 0, 0, 0.2)\" : \"0 8px 32px rgba(0, 0, 0, 0.1), 0 2px 8px rgba(0, 0, 0, 0.05)\"};\n  border-radius: 0 0 20px 20px;\n\n  @media (max-width: 768px) {\n    padding: 15px 20px;\n    border-radius: 0 0 15px 15px;\n  }\n\n  @media (max-width: 480px) {\n    padding: 12px 15px;\n    border-radius: 0 0 12px 12px;\n  }\n`;\n_c2 = Header;\nconst HeaderLeft = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 20px;\n\n  @media (max-width: 768px) {\n    gap: 15px;\n  }\n\n  @media (max-width: 480px) {\n    gap: 10px;\n  }\n`;\n_c3 = HeaderLeft;\nconst BackButton = styled.button`\n  background: ${props => props.theme.isDark ? \"linear-gradient(135deg, #444 0%, #555 100%)\" : \"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)\"};\n  border: 1px solid\n    ${props => props.theme.isDark ? \"rgba(85, 85, 85, 0.5)\" : \"rgba(222, 226, 230, 0.5)\"};\n  color: ${props => props.theme.isDark ? \"#fff\" : \"#333\"};\n  padding: 10px 16px;\n  border-radius: 12px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  font-size: 14px;\n  font-weight: 500;\n  box-shadow: ${props => props.theme.isDark ? \"0 4px 12px rgba(0, 0, 0, 0.3)\" : \"0 4px 12px rgba(0, 0, 0, 0.1)\"};\n\n  &:hover {\n    background: ${props => props.theme.isDark ? \"linear-gradient(135deg, #555 0%, #666 100%)\" : \"linear-gradient(135deg, #e9ecef 0%, #dee2e6 100%)\"};\n    transform: translateY(-2px);\n    box-shadow: ${props => props.theme.isDark ? \"0 6px 20px rgba(0, 0, 0, 0.4)\" : \"0 6px 20px rgba(0, 0, 0, 0.15)\"};\n  }\n\n  &:active {\n    transform: translateY(0);\n  }\n`;\n_c4 = BackButton;\nconst RoomInfo = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 10px;\n`;\n_c5 = RoomInfo;\nconst RoomTitle = styled.h2`\n  margin: 0;\n  font-size: 1.6rem;\n  font-weight: 700;\n  background: ${props => props.theme.isDark ? \"linear-gradient(135deg, #ffffff 0%, #e0e0e0 100%)\" : \"linear-gradient(135deg, #333333 0%, #555555 100%)\"};\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n  letter-spacing: -0.5px;\n\n  @media (max-width: 768px) {\n    font-size: 1.4rem;\n  }\n\n  @media (max-width: 480px) {\n    font-size: 1.2rem;\n  }\n`;\n_c6 = RoomTitle;\nconst UserCount = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  color: ${props => props.theme.isDark ? \"#ccc\" : \"#666\"};\n  font-size: 0.9rem;\n  background: ${props => props.theme.isDark ? \"rgba(0, 123, 255, 0.1)\" : \"rgba(0, 123, 255, 0.05)\"};\n  padding: 6px 12px;\n  border-radius: 20px;\n  border: 1px solid\n    ${props => props.theme.isDark ? \"rgba(0, 123, 255, 0.2)\" : \"rgba(0, 123, 255, 0.1)\"};\n  font-weight: 500;\n\n  svg {\n    color: #007bff;\n  }\n`;\n_c7 = UserCount;\nconst HeaderRight = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 10px;\n`;\n_c8 = HeaderRight;\nconst ActionButton = styled.button`\n  background: ${props => props.theme.isDark ? \"#333\" : \"#fff\"};\n  border: 2px solid ${props => props.theme.isDark ? \"#555\" : \"#ddd\"};\n  color: ${props => props.theme.isDark ? \"#fff\" : \"#333\"};\n  border-radius: 50%;\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  font-size: 16px;\n\n  &:hover {\n    transform: scale(1.1);\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\n  }\n\n  &.danger {\n    border-color: #dc3545;\n    color: #dc3545;\n\n    &:hover {\n      background: #dc3545;\n      color: white;\n    }\n  }\n`;\n_c9 = ActionButton;\nconst MessageWrapper = styled.div`\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 4px;\n  transition: all 0.2s ease;\n\n  &:hover {\n    transform: translateX(${props => props.isOwn ? \"-2px\" : \"2px\"});\n  }\n\n  &.message-wrapper:hover .message-actions {\n    opacity: 1;\n    transform: translateY(0);\n  }\n`;\n_c0 = MessageWrapper;\nconst MessageActions = styled.div`\n  opacity: 0;\n  transition: all 0.3s ease;\n  display: flex;\n  flex-wrap: wrap;\n  gap: 6px;\n  margin-top: 8px;\n  transform: translateY(5px);\n\n  .message-wrapper:hover & {\n    opacity: 1;\n    transform: translateY(0);\n  }\n`;\n_c1 = MessageActions;\nconst MessageActionButton = styled.button`\n  background: ${props => props.theme.isDark ? \"rgba(68, 68, 68, 0.8)\" : \"rgba(248, 249, 250, 0.9)\"};\n  backdrop-filter: blur(10px);\n  border: 1px solid\n    ${props => props.theme.isDark ? \"rgba(85, 85, 85, 0.5)\" : \"rgba(222, 226, 230, 0.5)\"};\n  color: ${props => props.theme.isDark ? \"#fff\" : \"#333\"};\n  border-radius: 8px;\n  padding: 6px 10px;\n  cursor: pointer;\n  font-size: 12px;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  font-weight: 500;\n  box-shadow: ${props => props.theme.isDark ? \"0 2px 8px rgba(0, 0, 0, 0.3)\" : \"0 2px 8px rgba(0, 0, 0, 0.1)\"};\n\n  &:hover {\n    background: ${props => props.theme.isDark ? \"rgba(85, 85, 85, 0.9)\" : \"rgba(233, 236, 239, 0.9)\"};\n    transform: translateY(-2px);\n    box-shadow: ${props => props.theme.isDark ? \"0 4px 12px rgba(0, 0, 0, 0.4)\" : \"0 4px 12px rgba(0, 0, 0, 0.15)\"};\n  }\n\n  &.danger {\n    color: #dc3545;\n    border-color: rgba(220, 53, 69, 0.3);\n\n    &:hover {\n      background: rgba(220, 53, 69, 0.1);\n      border-color: #dc3545;\n      color: #dc3545;\n    }\n  }\n\n  &:active {\n    transform: translateY(0);\n  }\n`;\n_c10 = MessageActionButton;\nconst EditInput = styled.input`\n  background: ${props => props.theme.isDark ? \"#3d3d3d\" : \"#ffffff\"};\n  border: 2px solid #007bff;\n  color: ${props => props.theme.isDark ? \"#ffffff\" : \"#333333\"};\n  padding: 8px 12px;\n  border-radius: 12px;\n  font-size: 0.95rem;\n  width: 100%;\n\n  &:focus {\n    outline: none;\n    box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);\n  }\n`;\n_c11 = EditInput;\nconst EditActions = styled.div`\n  display: flex;\n  gap: 8px;\n  margin-top: 8px;\n  justify-content: flex-end;\n`;\n_c12 = EditActions;\nconst EditActionButton = styled.button`\n  background: ${props => props.primary ? \"#007bff\" : \"transparent\"};\n  border: 1px solid ${props => props.primary ? \"#007bff\" : \"#ccc\"};\n  color: ${props => props.primary ? \"white\" : props.theme.isDark ? \"#fff\" : \"#333\"};\n  border-radius: 4px;\n  padding: 4px 8px;\n  cursor: pointer;\n  font-size: 12px;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: ${props => props.primary ? \"#0056b3\" : props.theme.isDark ? \"#444\" : \"#f8f9fa\"};\n  }\n`;\n_c13 = EditActionButton;\nconst ChatArea = styled.div`\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  position: relative;\n`;\n_c14 = ChatArea;\nconst MessagesContainer = styled.div`\n  flex: 1;\n  overflow-y: auto;\n  padding: 16px;\n  padding-bottom: 80px; /* Extra space for typing indicator */\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n\n  &::-webkit-scrollbar {\n    width: 8px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: ${props => props.theme.isDark ? \"#2d2d2d\" : \"#f1f1f1\"};\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: ${props => props.theme.isDark ? \"#555\" : \"#c1c1c1\"};\n    border-radius: 4px;\n  }\n\n  &::-webkit-scrollbar-thumb:hover {\n    background: ${props => props.theme.isDark ? \"#666\" : \"#a8a8a8\"};\n  }\n\n  @media (max-width: 768px) {\n    padding: 12px;\n    padding-bottom: 70px;\n    gap: 3px;\n  }\n\n  @media (max-width: 480px) {\n    padding: 8px;\n    padding-bottom: 60px;\n    gap: 2px;\n  }\n`;\n_c15 = MessagesContainer;\nconst Message = styled.div`\n  display: flex;\n  align-items: flex-start;\n  gap: 12px;\n  max-width: 100%;\n  margin-bottom: 12px;\n  flex-direction: ${props => props.isOwn ? \"row-reverse\" : \"row\"};\n  animation: messageSlideIn 0.3s ease-out;\n  transform: translateX(${props => props.swipeOffset || 0}px);\n  transition: transform 0.2s ease-out;\n  position: relative;\n\n  @keyframes messageSlideIn {\n    from {\n      opacity: 0;\n      transform: translateY(20px);\n    }\n    to {\n      opacity: 1;\n      transform: translateY(0);\n    }\n  }\n\n  ${props => props.isSystem && `\n    justify-content: center;\n    margin: 8px 0;\n  `}\n\n  @media (max-width: 768px) {\n    gap: 10px;\n    margin-bottom: 10px;\n  }\n`;\n_c16 = Message;\nconst MessageBubbleContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  max-width: 70%;\n  align-items: ${props => props.isOwn ? \"flex-end\" : \"flex-start\"};\n\n  @media (max-width: 768px) {\n    max-width: 80%;\n  }\n\n  @media (max-width: 480px) {\n    max-width: 85%;\n  }\n`;\n_c17 = MessageBubbleContainer;\nconst MessageHeader = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  margin-bottom: 2px;\n  flex-direction: ${props => props.isOwn ? \"row-reverse\" : \"row\"};\n`;\n_c18 = MessageHeader;\nconst Avatar = styled.img`\n  width: 44px;\n  height: 44px;\n  border-radius: 50%;\n  object-fit: cover;\n  border: 3px solid\n    ${props => props.theme.isDark ? \"rgba(255, 255, 255, 0.2)\" : \"rgba(0, 0, 0, 0.1)\"};\n  flex-shrink: 0;\n  transition: all 0.3s ease;\n  box-shadow: ${props => props.theme.isDark ? \"0 4px 12px rgba(0, 0, 0, 0.3)\" : \"0 4px 12px rgba(0, 0, 0, 0.1)\"};\n\n  &:hover {\n    transform: scale(1.1);\n    border-color: #007bff;\n    box-shadow: ${props => props.theme.isDark ? \"0 6px 20px rgba(0, 123, 255, 0.3)\" : \"0 6px 20px rgba(0, 123, 255, 0.2)\"};\n  }\n\n  @media (max-width: 480px) {\n    width: 40px;\n    height: 40px;\n  }\n`;\n_c19 = Avatar;\nconst Username = styled.span`\n  font-weight: 600;\n  font-size: 0.85rem;\n  color: ${props => props.theme.isDark ? \"#ccc\" : \"#666\"};\n\n  @media (max-width: 480px) {\n    font-size: 0.8rem;\n  }\n`;\n_c20 = Username;\nconst Timestamp = styled.span`\n  font-size: 0.75rem;\n  color: ${props => props.theme.isDark ? \"#888\" : \"#999\"};\n  margin-left: 8px;\n\n  @media (max-width: 480px) {\n    font-size: 0.7rem;\n  }\n`;\n_c21 = Timestamp;\nconst MessageContent = styled.div`\n  background: ${props => {\n  if (props.isSystem) return \"transparent\";\n  if (props.isOwn) return props.theme.isDark ? \"linear-gradient(135deg, #007bff 0%, #0056b3 100%)\" : \"linear-gradient(135deg, #007bff 0%, #0056b3 100%)\";\n  return props.theme.isDark ? \"linear-gradient(135deg, #404040 0%, #4a4a4a 100%)\" : \"linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%)\";\n}};\n\n  color: ${props => {\n  if (props.isSystem) return props.theme.isDark ? \"#888\" : \"#666\";\n  if (props.isOwn) return \"#ffffff\";\n  return props.theme.isDark ? \"#ffffff\" : \"#333333\";\n}};\n\n  padding: ${props => props.isSystem ? \"8px 16px\" : \"12px 16px\"};\n\n  border-radius: ${props => {\n  if (props.isSystem) return \"25px\";\n  if (props.isOwn) return \"20px 20px 6px 20px\";\n  return \"20px 20px 20px 6px\";\n}};\n\n  border: ${props => {\n  if (props.isSystem) return `2px dashed ${props.theme.isDark ? \"#555\" : \"#ccc\"}`;\n  if (!props.isOwn && !props.isSystem) return props.theme.isDark ? \"1px solid rgba(255, 255, 255, 0.1)\" : \"1px solid rgba(0, 0, 0, 0.05)\";\n  return \"none\";\n}};\n\n  word-wrap: break-word;\n  font-size: 0.95rem;\n  line-height: 1.5;\n  font-style: ${props => props.isSystem ? \"italic\" : \"normal\"};\n  text-align: ${props => props.isSystem ? \"center\" : \"left\"};\n  font-weight: ${props => props.isSystem ? \"400\" : \"500\"};\n\n  box-shadow: ${props => {\n  if (props.isSystem) return \"none\";\n  if (props.isOwn) return props.theme.isDark ? \"0 4px 12px rgba(0, 123, 255, 0.3), 0 2px 4px rgba(0, 0, 0, 0.2)\" : \"0 4px 12px rgba(0, 123, 255, 0.2), 0 2px 4px rgba(0, 0, 0, 0.1)\";\n  return props.theme.isDark ? \"0 4px 12px rgba(0, 0, 0, 0.3), 0 2px 4px rgba(0, 0, 0, 0.2)\" : \"0 4px 12px rgba(0, 0, 0, 0.08), 0 2px 4px rgba(0, 0, 0, 0.04)\";\n}};\n\n  position: relative;\n  transition: all 0.2s ease;\n\n  &:hover {\n    transform: translateY(-1px);\n    box-shadow: ${props => {\n  if (props.isSystem) return \"none\";\n  if (props.isOwn) return props.theme.isDark ? \"0 6px 20px rgba(0, 123, 255, 0.4), 0 4px 8px rgba(0, 0, 0, 0.3)\" : \"0 6px 20px rgba(0, 123, 255, 0.3), 0 4px 8px rgba(0, 0, 0, 0.15)\";\n  return props.theme.isDark ? \"0 6px 20px rgba(0, 0, 0, 0.4), 0 4px 8px rgba(0, 0, 0, 0.3)\" : \"0 6px 20px rgba(0, 0, 0, 0.12), 0 4px 8px rgba(0, 0, 0, 0.08)\";\n}};\n  }\n\n  ${props => props.isSystem && `\n    margin: 8px auto;\n    max-width: 320px;\n    backdrop-filter: blur(10px);\n  `}\n\n  @media (max-width: 480px) {\n    font-size: 0.9rem;\n    padding: ${props => props.isSystem ? \"8px 16px\" : \"12px 16px\"};\n  }\n`;\n_c22 = MessageContent;\nconst TypingIndicator = styled.div`\n  position: absolute;\n  bottom: 100px; /* Position above input area */\n  left: 20px;\n  right: 20px;\n  padding: 10px 20px;\n  color: ${props => props.theme.isDark ? \"#888\" : \"#666\"};\n  font-style: italic;\n  font-size: 0.9rem;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  animation: fadeIn 0.3s ease-in;\n  background: ${props => props.theme.isDark ? \"rgba(45, 45, 45, 0.95)\" : \"rgba(255, 255, 255, 0.95)\"};\n  border-radius: 20px;\n  backdrop-filter: blur(10px);\n  border: 1px solid ${props => props.theme.isDark ? \"#444\" : \"#e0e0e0\"};\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n  z-index: 10;\n\n  @keyframes fadeIn {\n    from {\n      opacity: 0;\n      transform: translateY(10px);\n    }\n    to {\n      opacity: 1;\n      transform: translateY(0);\n    }\n  }\n\n  @media (max-width: 768px) {\n    bottom: 90px;\n    left: 15px;\n    right: 15px;\n    padding: 8px 16px;\n    font-size: 0.85rem;\n  }\n\n  @media (max-width: 480px) {\n    bottom: 80px;\n    left: 10px;\n    right: 10px;\n    padding: 8px 16px;\n    font-size: 0.85rem;\n  }\n`;\n_c23 = TypingIndicator;\nconst TypingDots = styled.div`\n  display: flex;\n  gap: 3px;\n\n  span {\n    width: 8px;\n    height: 8px;\n    background: ${props => props.theme.isDark ? \"#007bff\" : \"#007bff\"};\n    border-radius: 50%;\n    animation: typing 1.4s infinite ease-in-out;\n\n    &:nth-child(1) {\n      animation-delay: 0s;\n    }\n    &:nth-child(2) {\n      animation-delay: 0.2s;\n    }\n    &:nth-child(3) {\n      animation-delay: 0.4s;\n    }\n  }\n\n  @keyframes typing {\n    0%,\n    60%,\n    100% {\n      transform: translateY(0);\n      opacity: 0.4;\n      background: ${props => props.theme.isDark ? \"#666\" : \"#999\"};\n    }\n    30% {\n      transform: translateY(-8px);\n      opacity: 1;\n      background: ${props => props.theme.isDark ? \"#007bff\" : \"#007bff\"};\n    }\n  }\n`;\n_c24 = TypingDots;\nconst InputArea = styled.div`\n  background: ${props => props.theme.isDark ? \"linear-gradient(135deg, rgba(45, 45, 45, 0.95) 0%, rgba(60, 60, 60, 0.95) 100%)\" : \"linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 249, 250, 0.95) 100%)\"};\n  backdrop-filter: blur(20px);\n  padding: 25px;\n  border-top: 1px solid\n    ${props => props.theme.isDark ? \"rgba(68, 68, 68, 0.5)\" : \"rgba(224, 224, 224, 0.5)\"};\n  border-radius: 20px 20px 0 0;\n  box-shadow: ${props => props.theme.isDark ? \"0 -8px 32px rgba(0, 0, 0, 0.3), 0 -2px 8px rgba(0, 0, 0, 0.2)\" : \"0 -8px 32px rgba(0, 0, 0, 0.1), 0 -2px 8px rgba(0, 0, 0, 0.05)\"};\n  flex-shrink: 0;\n\n  @media (max-width: 768px) {\n    padding: 16px;\n    border-radius: 15px 15px 0 0;\n  }\n\n  @media (max-width: 480px) {\n    padding: 12px;\n    border-radius: 12px 12px 0 0;\n    min-height: auto;\n  }\n`;\n_c25 = InputArea;\nconst InputContainer = styled.div`\n  display: flex;\n  gap: 12px;\n  align-items: flex-end;\n  flex-wrap: nowrap;\n\n  @media (max-width: 768px) {\n    gap: 8px;\n  }\n\n  @media (max-width: 480px) {\n    gap: 6px;\n    flex-wrap: nowrap;\n    overflow-x: visible;\n  }\n`;\n_c26 = InputContainer;\nconst Input = styled.input`\n  flex: 1;\n  min-width: 0;\n  padding: 16px 20px;\n  border: 2px solid\n    ${props => props.theme.isDark ? \"rgba(85, 85, 85, 0.5)\" : \"rgba(224, 224, 224, 0.5)\"};\n  border-radius: 25px;\n  font-size: 15px;\n  height: 50px;\n  background: ${props => props.theme.isDark ? \"linear-gradient(135deg, rgba(61, 61, 61, 0.8) 0%, rgba(80, 80, 80, 0.8) 100%)\" : \"linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(248, 249, 250, 0.9) 100%)\"};\n  backdrop-filter: blur(10px);\n  color: ${props => props.theme.isDark ? \"#ffffff\" : \"#333333\"};\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  font-weight: 500;\n  box-shadow: ${props => props.theme.isDark ? \"inset 0 2px 4px rgba(0, 0, 0, 0.2)\" : \"inset 0 2px 4px rgba(0, 0, 0, 0.05)\"};\n\n  &:focus {\n    outline: none;\n    border-color: #007bff;\n    box-shadow: ${props => props.theme.isDark ? \"0 0 0 4px rgba(0, 123, 255, 0.2), inset 0 2px 4px rgba(0, 0, 0, 0.2)\" : \"0 0 0 4px rgba(0, 123, 255, 0.1), inset 0 2px 4px rgba(0, 0, 0, 0.05)\"};\n    transform: translateY(-1px);\n  }\n\n  &::placeholder {\n    color: ${props => props.theme.isDark ? \"#aaa\" : \"#999\"};\n    font-weight: 400;\n  }\n\n  @media (max-width: 480px) {\n    padding: 12px 16px;\n    height: 44px;\n    font-size: 14px;\n    border-radius: 22px;\n  }\n`;\n_c27 = Input;\nconst SendButton = styled.button`\n  background: ${props => props.disabled ? props.theme.isDark ? \"#555\" : \"#ccc\" : \"linear-gradient(135deg, #007bff 0%, #0056b3 100%)\"};\n  color: white;\n  border: none;\n  padding: 12px;\n  border-radius: 50%;\n  cursor: ${props => props.disabled ? \"not-allowed\" : \"pointer\"};\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 50px;\n  height: 50px;\n  font-size: 16px;\n  flex-shrink: 0;\n  box-shadow: ${props => props.disabled ? \"none\" : props.theme.isDark ? \"0 4px 12px rgba(0, 123, 255, 0.4), 0 2px 4px rgba(0, 0, 0, 0.2)\" : \"0 4px 12px rgba(0, 123, 255, 0.3), 0 2px 4px rgba(0, 0, 0, 0.1)\"};\n\n  &:hover:not(:disabled) {\n    transform: translateY(-3px) scale(1.05);\n    box-shadow: ${props => props.theme.isDark ? \"0 8px 25px rgba(0, 123, 255, 0.5), 0 4px 8px rgba(0, 0, 0, 0.3)\" : \"0 8px 25px rgba(0, 123, 255, 0.4), 0 4px 8px rgba(0, 0, 0, 0.15)\"};\n    background: linear-gradient(135deg, #0056b3 0%, #004085 100%);\n  }\n\n  &:active:not(:disabled) {\n    transform: translateY(-1px) scale(1.02);\n  }\n\n  &:disabled {\n    opacity: 0.6;\n  }\n\n  @media (max-width: 480px) {\n    width: 44px;\n    height: 44px;\n    padding: 10px;\n    font-size: 14px;\n  }\n`;\n_c28 = SendButton;\nconst EmptyState = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  color: ${props => props.theme.isDark ? \"#ccc\" : \"#666\"};\n  text-align: center;\n  padding: 40px 20px;\n\n  h3 {\n    font-size: 1.5rem;\n    margin-bottom: 12px;\n    background: ${props => props.theme.isDark ? \"linear-gradient(135deg, #ffffff 0%, #cccccc 100%)\" : \"linear-gradient(135deg, #333333 0%, #666666 100%)\"};\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n    background-clip: text;\n  }\n\n  p {\n    font-size: 1rem;\n    opacity: 0.8;\n    max-width: 300px;\n    line-height: 1.5;\n  }\n`;\n_c29 = EmptyState;\nconst ReplyPreview = styled.div`\n  background: ${props => props.theme.isDark ? \"rgba(68, 68, 68, 0.8)\" : \"rgba(248, 249, 250, 0.9)\"};\n  backdrop-filter: blur(10px);\n  border-left: 4px solid #007bff;\n  padding: 12px 16px;\n  margin-bottom: 12px;\n  border-radius: 8px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  animation: slideDown 0.3s ease-out;\n\n  @keyframes slideDown {\n    from {\n      opacity: 0;\n      transform: translateY(-10px);\n    }\n    to {\n      opacity: 1;\n      transform: translateY(0);\n    }\n  }\n`;\n_c30 = ReplyPreview;\nconst ReplyContent = styled.div`\n  flex: 1;\n\n  .reply-to {\n    font-size: 0.8rem;\n    color: #007bff;\n    font-weight: 600;\n    margin-bottom: 4px;\n  }\n\n  .reply-message {\n    font-size: 0.9rem;\n    color: ${props => props.theme.isDark ? \"#ccc\" : \"#666\"};\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    max-width: 200px;\n  }\n`;\n_c31 = ReplyContent;\nconst ReplyCloseButton = styled.button`\n  background: transparent;\n  border: none;\n  color: ${props => props.theme.isDark ? \"#ccc\" : \"#666\"};\n  cursor: pointer;\n  padding: 4px;\n  border-radius: 50%;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 24px;\n  height: 24px;\n\n  &:hover {\n    background: ${props => props.theme.isDark ? \"rgba(255, 255, 255, 0.1)\" : \"rgba(0, 0, 0, 0.05)\"};\n    color: #dc3545;\n  }\n`;\n_c32 = ReplyCloseButton;\nconst SwipeIndicator = styled.div`\n  position: absolute;\n  right: ${props => props.isOwn ? \"auto\" : \"10px\"};\n  left: ${props => props.isOwn ? \"10px\" : \"auto\"};\n  top: 50%;\n  transform: translateY(-50%);\n  background: rgba(0, 123, 255, 0.8);\n  color: white;\n  border-radius: 50%;\n  width: 32px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  opacity: ${props => props.show ? 1 : 0};\n  transition: opacity 0.2s ease;\n  z-index: 10;\n`;\n_c33 = SwipeIndicator;\nconst ReplyMessagePreview = styled.div`\n  background: ${props => props.theme.isDark ? \"rgba(68, 68, 68, 0.6)\" : \"rgba(248, 249, 250, 0.8)\"};\n  border-left: 3px solid #007bff;\n  padding: 8px 12px;\n  margin-bottom: 6px;\n  border-radius: 8px;\n  font-size: 0.85rem;\n  color: ${props => props.theme.isDark ? \"#ccc\" : \"#666\"};\n  backdrop-filter: blur(5px);\n  border: 1px solid\n    ${props => props.theme.isDark ? \"rgba(0, 123, 255, 0.2)\" : \"rgba(0, 123, 255, 0.1)\"};\n\n  .reply-username {\n    color: #007bff;\n    font-weight: 600;\n    font-size: 0.8rem;\n    margin-bottom: 2px;\n    display: flex;\n    align-items: center;\n    gap: 4px;\n\n    &::before {\n      content: \"â†³\";\n      font-size: 0.9rem;\n      opacity: 0.7;\n    }\n  }\n\n  .reply-content {\n    opacity: 0.8;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    max-width: 100%;\n    font-style: italic;\n  }\n`;\n_c34 = ReplyMessagePreview;\nconst MessageReactions = styled.div`\n  display: flex;\n  gap: 6px;\n  margin-top: 6px;\n  align-items: center;\n  justify-content: ${props => props.isOwn ? \"flex-end\" : \"flex-start\"};\n  padding: 0 4px;\n\n  /* Position reactions slightly overlapping the message bubble */\n  margin-top: -8px;\n  position: relative;\n  z-index: 2;\n`;\n_c35 = MessageReactions;\nconst ReactionButton = styled.button`\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  padding: 6px;\n  border-radius: 50%;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 32px;\n  height: 32px;\n  position: relative;\n\n  &:hover {\n    background: rgba(231, 76, 60, 0.1);\n    transform: scale(1.1);\n  }\n\n  &:active {\n    transform: scale(0.9);\n  }\n\n  &::before {\n    content: \"\";\n    position: absolute;\n    inset: -2px;\n    border-radius: 50%;\n    background: linear-gradient(45deg, #ff6b6b, #ee5a24);\n    opacity: 0;\n    transition: opacity 0.3s ease;\n    z-index: -1;\n  }\n\n  &:hover::before {\n    opacity: 0.1;\n  }\n`;\n_c36 = ReactionButton;\nconst InputActions = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  flex-shrink: 0;\n\n  @media (max-width: 480px) {\n    gap: 2px;\n  }\n`;\n_c37 = InputActions;\nconst ActionIcon = styled.button`\n  background: transparent;\n  border: none;\n  color: ${props => props.theme.isDark ? \"#ccc\" : \"#666\"};\n  cursor: pointer;\n  padding: 6px;\n  border-radius: 50%;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 32px;\n  height: 32px;\n  flex-shrink: 0;\n\n  &:hover {\n    background: ${props => props.theme.isDark ? \"rgba(255, 255, 255, 0.1)\" : \"rgba(0, 0, 0, 0.05)\"};\n    color: #007bff;\n    transform: scale(1.1);\n  }\n\n  @media (max-width: 480px) {\n    width: 28px;\n    height: 28px;\n    padding: 4px;\n  }\n`;\n_c38 = ActionIcon;\nconst ContextMenuOverlay = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.3);\n  backdrop-filter: blur(4px);\n  z-index: 1000;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  animation: fadeIn 0.2s ease-out;\n\n  @keyframes fadeIn {\n    from {\n      opacity: 0;\n    }\n    to {\n      opacity: 1;\n    }\n  }\n`;\n_c39 = ContextMenuOverlay;\nconst ContextMenuContainer = styled.div`\n  background: ${props => props.theme.isDark ? \"linear-gradient(135deg, #2d2d2d 0%, #404040 100%)\" : \"linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%)\"};\n  border-radius: 16px;\n  padding: 8px;\n  box-shadow: ${props => props.theme.isDark ? \"0 20px 60px rgba(0, 0, 0, 0.5), 0 8px 24px rgba(0, 0, 0, 0.3)\" : \"0 20px 60px rgba(0, 0, 0, 0.15), 0 8px 24px rgba(0, 0, 0, 0.1)\"};\n  border: 1px solid\n    ${props => props.theme.isDark ? \"rgba(255, 255, 255, 0.1)\" : \"rgba(0, 0, 0, 0.05)\"};\n  backdrop-filter: blur(20px);\n  max-width: 90vw;\n  max-height: 80vh;\n  overflow-y: auto;\n  animation: slideUp 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n\n  @keyframes slideUp {\n    from {\n      opacity: 0;\n      transform: translateY(20px) scale(0.95);\n    }\n    to {\n      opacity: 1;\n      transform: translateY(0) scale(1);\n    }\n  }\n\n  &::-webkit-scrollbar {\n    width: 6px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: transparent;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: ${props => props.theme.isDark ? \"#555\" : \"#ccc\"};\n    border-radius: 3px;\n  }\n`;\n_c40 = ContextMenuContainer;\nconst ContextMenuGrid = styled.div`\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));\n  gap: 8px;\n  max-width: 480px;\n\n  @media (max-width: 768px) {\n    grid-template-columns: repeat(3, 1fr);\n    max-width: 360px;\n  }\n\n  @media (max-width: 480px) {\n    grid-template-columns: repeat(2, 1fr);\n    max-width: 280px;\n  }\n`;\n_c41 = ContextMenuGrid;\nconst ContextMenuItem = styled.button`\n  background: ${props => props.theme.isDark ? \"rgba(68, 68, 68, 0.6)\" : \"rgba(248, 249, 250, 0.8)\"};\n  border: 1px solid\n    ${props => props.theme.isDark ? \"rgba(85, 85, 85, 0.4)\" : \"rgba(222, 226, 230, 0.4)\"};\n  color: ${props => {\n  if (props.danger) return \"#dc3545\";\n  if (props.primary) return \"#007bff\";\n  return props.theme.isDark ? \"#ffffff\" : \"#333333\";\n}};\n  padding: 12px 8px;\n  border-radius: 12px;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 6px;\n  font-size: 11px;\n  font-weight: 500;\n  text-align: center;\n  backdrop-filter: blur(10px);\n  min-height: 70px;\n  justify-content: center;\n\n  &:hover {\n    background: ${props => {\n  if (props.danger) return \"rgba(220, 53, 69, 0.1)\";\n  if (props.primary) return \"rgba(0, 123, 255, 0.1)\";\n  return props.theme.isDark ? \"rgba(85, 85, 85, 0.8)\" : \"rgba(233, 236, 239, 0.9)\";\n}};\n    transform: translateY(-2px) scale(1.02);\n    box-shadow: ${props => props.theme.isDark ? \"0 8px 20px rgba(0, 0, 0, 0.4)\" : \"0 8px 20px rgba(0, 0, 0, 0.15)\"};\n    border-color: ${props => {\n  if (props.danger) return \"rgba(220, 53, 69, 0.3)\";\n  if (props.primary) return \"rgba(0, 123, 255, 0.3)\";\n  return props.theme.isDark ? \"rgba(85, 85, 85, 0.6)\" : \"rgba(222, 226, 230, 0.6)\";\n}};\n  }\n\n  &:active {\n    transform: translateY(0) scale(0.98);\n  }\n\n  svg {\n    font-size: 16px;\n    opacity: 0.8;\n  }\n\n  span {\n    line-height: 1.2;\n    max-width: 100%;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n`;\n_c42 = ContextMenuItem;\nconst MessagePreview = styled.div`\n  background: ${props => props.theme.isDark ? \"rgba(45, 45, 45, 0.9)\" : \"rgba(255, 255, 255, 0.95)\"};\n  border-radius: 12px;\n  padding: 16px;\n  margin-bottom: 16px;\n  border: 1px solid\n    ${props => props.theme.isDark ? \"rgba(85, 85, 85, 0.5)\" : \"rgba(222, 226, 230, 0.5)\"};\n  backdrop-filter: blur(10px);\n\n  .preview-header {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    margin-bottom: 8px;\n\n    .avatar {\n      width: 24px;\n      height: 24px;\n      border-radius: 50%;\n      object-fit: cover;\n    }\n\n    .username {\n      font-weight: 600;\n      font-size: 0.9rem;\n      color: ${props => props.theme.isDark ? \"#ccc\" : \"#666\"};\n    }\n\n    .timestamp {\n      font-size: 0.8rem;\n      color: ${props => props.theme.isDark ? \"#888\" : \"#999\"};\n      margin-left: auto;\n    }\n  }\n\n  .preview-content {\n    color: ${props => props.theme.isDark ? \"#ffffff\" : \"#333333\"};\n    font-size: 0.9rem;\n    line-height: 1.4;\n    max-height: 60px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    display: -webkit-box;\n    -webkit-line-clamp: 3;\n    -webkit-box-orient: vertical;\n  }\n`;\n_c43 = MessagePreview;\nconst ConversationBar = styled.div`\n  position: sticky;\n  top: 0;\n  z-index: 100;\n  background: ${props => props.theme.isDark ? \"linear-gradient(135deg, rgba(45, 45, 45, 0.95) 0%, rgba(60, 60, 60, 0.95) 100%)\" : \"linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 249, 250, 0.95) 100%)\"};\n  backdrop-filter: blur(20px);\n  border-bottom: 1px solid\n    ${props => props.theme.isDark ? \"rgba(85, 85, 85, 0.3)\" : \"rgba(222, 226, 230, 0.3)\"};\n  padding: 12px 20px;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  box-shadow: ${props => props.theme.isDark ? \"0 2px 20px rgba(0, 0, 0, 0.3)\" : \"0 2px 20px rgba(0, 0, 0, 0.1)\"};\n\n  .conversation-info {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    flex: 1;\n\n    .avatar {\n      width: 36px;\n      height: 36px;\n      border-radius: 50%;\n      object-fit: cover;\n      border: 2px solid\n        ${props => props.theme.isDark ? \"rgba(255, 255, 255, 0.1)\" : \"rgba(0, 0, 0, 0.1)\"};\n    }\n\n    .details {\n      display: flex;\n      flex-direction: column;\n\n      .name {\n        font-weight: 600;\n        font-size: 1rem;\n        color: ${props => props.theme.isDark ? \"#ffffff\" : \"#333333\"};\n        margin: 0;\n      }\n\n      .status {\n        font-size: 0.8rem;\n        color: ${props => props.theme.isDark ? \"#aaa\" : \"#666\"};\n        margin: 0;\n        display: flex;\n        align-items: center;\n        gap: 4px;\n\n        .online-dot {\n          width: 6px;\n          height: 6px;\n          border-radius: 50%;\n          background: #4caf50;\n        }\n      }\n    }\n  }\n\n  .conversation-actions {\n    display: flex;\n    gap: 8px;\n  }\n`;\n_c44 = ConversationBar;\nconst ChatRoom = () => {\n  _s();\n  var _contextMenu$message$, _contextMenu$message$2, _contextMenu$message$3;\n  const {\n    roomId\n  } = useParams();\n  const navigate = useNavigate();\n  const {\n    socket,\n    leaveRoom,\n    joinRoom,\n    isConnected,\n    sendMessage,\n    startTyping,\n    stopTyping,\n    user\n  } = useSocket();\n  const {\n    messages,\n    typingUsers,\n    roomUsers\n  } = useChat();\n  const {\n    theme,\n    toggleTheme\n  } = useTheme();\n  const [newMessage, setNewMessage] = useState(\"\");\n  const [isTyping, setIsTyping] = useState(false);\n  const [editingMessageId, setEditingMessageId] = useState(null);\n  const [editingContent, setEditingContent] = useState(\"\");\n  const [replyingTo, setReplyingTo] = useState(null);\n  const [contextMenu, setContextMenu] = useState(null);\n  const [longPressTimer, setLongPressTimer] = useState(null);\n  const messagesEndRef = useRef(null);\n  const typingTimeoutRef = useRef(null);\n  const touchStartRef = useRef(null);\n  const touchEndRef = useRef(null);\n  const doubleTapTimeoutRef = useRef(null);\n  console.log(\"ðŸ  ChatRoom: Component rendered with:\", {\n    roomId,\n    isConnected,\n    user: user === null || user === void 0 ? void 0 : user.username,\n    messagesCount: messages.length,\n    typingUsersCount: typingUsers.length,\n    roomUsersCount: roomUsers.length\n  });\n  useEffect(() => {\n    if (!isConnected || !user) {\n      navigate(\"/login\");\n      return;\n    }\n\n    // Join the room when component mounts\n    const joinCurrentRoom = async () => {\n      try {\n        console.log(\"ðŸ  ChatRoom: Attempting to join room:\", roomId);\n        await joinRoom(roomId);\n        console.log(\"âœ… ChatRoom: Successfully joined room:\", roomId);\n      } catch (error) {\n        console.error(\"âŒ ChatRoom: Failed to join room:\", error);\n        navigate(\"/rooms\");\n      }\n    };\n    joinCurrentRoom();\n  }, [isConnected, user, navigate, joinRoom, roomId]);\n  useEffect(() => {\n    console.log(\"ðŸ“ ChatRoom: Messages updated, count:\", messages.length);\n    console.log(\"ðŸ“ ChatRoom: Current messages:\", messages);\n    scrollToBottom();\n  }, [messages]);\n  useEffect(() => {\n    console.log(\"âŒ¨ï¸ ChatRoom: Typing users updated:\", typingUsers);\n  }, [typingUsers]);\n  useEffect(() => {\n    console.log(\"ðŸ‘¥ ChatRoom: Room users updated:\", roomUsers);\n  }, [roomUsers]);\n  useEffect(() => {\n    if (isTyping) {\n      console.log(\"âŒ¨ï¸ ChatRoom: Starting typing indicator\");\n      startTyping();\n    } else {\n      console.log(\"âŒ¨ï¸ ChatRoom: Stopping typing indicator\");\n      stopTyping();\n    }\n  }, [isTyping, startTyping, stopTyping]);\n\n  // Cleanup long press timer on unmount\n  useEffect(() => {\n    return () => {\n      if (longPressTimer) {\n        clearTimeout(longPressTimer);\n      }\n      if (typingTimeoutRef.current) {\n        clearTimeout(typingTimeoutRef.current);\n      }\n    };\n  }, [longPressTimer]);\n\n  // Handle keyboard events for context menu\n  useEffect(() => {\n    const handleKeyDown = e => {\n      if (e.key === \"Escape\" && contextMenu) {\n        closeContextMenu();\n      }\n    };\n    if (contextMenu) {\n      document.addEventListener(\"keydown\", handleKeyDown);\n      return () => document.removeEventListener(\"keydown\", handleKeyDown);\n    }\n  }, [contextMenu]);\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  };\n  const handleSendMessage = async e => {\n    e.preventDefault();\n    if (!newMessage.trim()) return;\n    console.log(\"ðŸ“¨ ChatRoom: Attempting to send message:\", newMessage.trim());\n    try {\n      if (replyingTo) {\n        // Send message with reply data\n        if (socket && isConnected) {\n          socket.emit(\"chat-message\", {\n            content: newMessage.trim(),\n            replyTo: replyingTo.id\n          });\n        }\n      } else {\n        // Send regular message\n        sendMessage(newMessage.trim());\n      }\n      setNewMessage(\"\");\n      setReplyingTo(null);\n      setIsTyping(false);\n      console.log(\"âœ… ChatRoom: Message sent successfully\");\n    } catch (err) {\n      console.error(\"âŒ ChatRoom: Failed to send message:\", err);\n    }\n  };\n  const handleInputChange = e => {\n    setNewMessage(e.target.value);\n\n    // Clear existing timeout\n    if (typingTimeoutRef.current) {\n      clearTimeout(typingTimeoutRef.current);\n    }\n\n    // Start typing if not already\n    if (!isTyping && e.target.value.trim()) {\n      setIsTyping(true);\n    }\n\n    // Set new timeout to stop typing\n    if (e.target.value.trim()) {\n      typingTimeoutRef.current = setTimeout(() => {\n        setIsTyping(false);\n      }, 2000); // Stop typing after 2 seconds of inactivity\n    } else {\n      setIsTyping(false);\n    }\n  };\n  const handleInputKeyDown = e => {\n    if (e.key === \"Enter\") {\n      e.preventDefault();\n      handleSendMessage(e);\n    }\n  };\n  const handleLeaveRoom = () => {\n    console.log(\"ðŸšª ChatRoom: User clicked leave room\");\n    leaveRoom();\n    navigate(\"/rooms\");\n  };\n  const handleEditMessage = (messageId, currentContent) => {\n    setEditingMessageId(messageId);\n    setEditingContent(currentContent);\n  };\n  const handleLongPress = (message, event) => {\n    event.preventDefault();\n    setContextMenu({\n      message,\n      x: event.clientX || event.touches && event.touches[0].clientX || 0,\n      y: event.clientY || event.touches && event.touches[0].clientY || 0\n    });\n  };\n  const handleMouseDown = (message, event) => {\n    const timer = setTimeout(() => {\n      handleLongPress(message, event);\n    }, 500); // 500ms for long press\n    setLongPressTimer(timer);\n  };\n  const handleMouseUp = () => {\n    if (longPressTimer) {\n      clearTimeout(longPressTimer);\n      setLongPressTimer(null);\n    }\n  };\n  const closeContextMenu = () => {\n    setContextMenu(null);\n  };\n  const handleContextAction = (action, message) => {\n    console.log(`Context action: ${action}`, message);\n    switch (action) {\n      case \"reply\":\n        setReplyingTo(message);\n        break;\n      case \"copy\":\n        navigator.clipboard.writeText(message.content);\n        break;\n      case \"edit\":\n        if (message.userId === (user === null || user === void 0 ? void 0 : user.id)) {\n          handleEditMessage(message.id, message.content);\n        }\n        break;\n      case \"delete\":\n        if (message.userId === (user === null || user === void 0 ? void 0 : user.id)) {\n          handleDeleteMessage(message.id);\n        }\n        break;\n      case \"forward\":\n        // Implement forward functionality\n        console.log(\"Forward message:\", message.content);\n        break;\n      case \"star\":\n        // Add heart reaction like double tap\n        if (socket && isConnected) {\n          socket.emit(\"message-reaction\", {\n            messageId: message._id,\n            reaction: \"heart\",\n            action: \"add\"\n          });\n        }\n        break;\n      case \"pin\":\n        // Implement pin functionality\n        console.log(\"Pin message:\", message.id);\n        break;\n      case \"info\":\n        // Show message info\n        console.log(\"Message info:\", message);\n        break;\n      case \"translate\":\n        // Implement translation\n        console.log(\"Translate message:\", message.content);\n        break;\n      case \"quote\":\n        // Quote message\n        setNewMessage(`\"${message.content}\" - ${message.username}\\n\\n`);\n        break;\n      case \"save\":\n        // Save message locally\n        const savedMessages = JSON.parse(localStorage.getItem(\"savedMessages\") || \"[]\");\n        savedMessages.push(message);\n        localStorage.setItem(\"savedMessages\", JSON.stringify(savedMessages));\n        break;\n      case \"share\":\n        if (navigator.share) {\n          navigator.share({\n            title: \"Shared Message\",\n            text: `${message.username}: ${message.content}`\n          });\n        }\n        break;\n      case \"report\":\n        // Implement report functionality\n        console.log(\"Report message:\", message.id);\n        break;\n      default:\n        console.log(`Action ${action} not implemented yet`);\n    }\n    closeContextMenu();\n  };\n  const contextMenuItems = [{\n    id: \"reply\",\n    label: \"Reply\",\n    icon: FaReply,\n    primary: true\n  }, {\n    id: \"copy\",\n    label: \"Copy\",\n    icon: FaCopy\n  }, {\n    id: \"forward\",\n    label: \"Forward\",\n    icon: FaShareAlt\n  }, {\n    id: \"star\",\n    label: \"Star\",\n    icon: FaStar\n  }, {\n    id: \"pin\",\n    label: \"Pin\",\n    icon: FaThumbtack\n  }, {\n    id: \"info\",\n    label: \"Info\",\n    icon: FaInfoCircle\n  }, {\n    id: \"edit\",\n    label: \"Edit\",\n    icon: FaEdit\n  }, {\n    id: \"delete\",\n    label: \"Delete\",\n    icon: FaTrash,\n    danger: true\n  }, {\n    id: \"quote\",\n    label: \"Quote\",\n    icon: FaQuoteLeft\n  }, {\n    id: \"translate\",\n    label: \"Translate\",\n    icon: FaLanguage\n  }, {\n    id: \"save\",\n    label: \"Save\",\n    icon: FaSave\n  }, {\n    id: \"share\",\n    label: \"Share\",\n    icon: FaShare\n  }, {\n    id: \"report\",\n    label: \"Report\",\n    icon: FaFlag,\n    danger: true\n  }];\n  const handleSaveEdit = () => {\n    if (!editingContent.trim()) return;\n\n    // Emit edit message event\n    if (socket && isConnected) {\n      socket.emit(\"edit-message\", {\n        messageId: editingMessageId,\n        newContent: editingContent.trim()\n      });\n    }\n    setEditingMessageId(null);\n    setEditingContent(\"\");\n  };\n  const handleCancelEdit = () => {\n    setEditingMessageId(null);\n    setEditingContent(\"\");\n  };\n  const handleDeleteMessage = messageId => {\n    if (window.confirm(\"Are you sure you want to delete this message?\")) {\n      // Emit delete message event\n      if (socket && isConnected) {\n        socket.emit(\"delete-message\", {\n          messageId\n        });\n      }\n    }\n  };\n  const handleClearAllMessages = () => {\n    if (window.confirm(\"Are you sure you want to clear all messages in this room? This action cannot be undone.\")) {\n      // Emit clear all messages event\n      if (socket && isConnected) {\n        socket.emit(\"clear-all-messages\", {\n          roomId\n        });\n      }\n    }\n  };\n  const handleReplyToMessage = message => {\n    var _message$senderId;\n    setReplyingTo({\n      id: message._id,\n      username: ((_message$senderId = message.senderId) === null || _message$senderId === void 0 ? void 0 : _message$senderId.username) || \"Unknown\",\n      content: message.content\n    });\n  };\n  const handleCancelReply = () => {\n    setReplyingTo(null);\n  };\n  const handleDoubleTap = message => {\n    if (message.messageType === \"system\") return;\n\n    // Emit reaction to server - the server will broadcast the update\n    if (socket && isConnected) {\n      socket.emit(\"message-reaction\", {\n        messageId: message._id,\n        reaction: \"heart\",\n        action: \"add\"\n      });\n    }\n  };\n  const handleTouchStart = (e, message) => {\n    if (message.messageType === \"system\") return;\n    touchStartRef.current = {\n      x: e.touches[0].clientX,\n      y: e.touches[0].clientY,\n      time: Date.now(),\n      messageId: message._id\n    };\n\n    // Start long press timer\n    const timer = setTimeout(() => {\n      handleLongPress(message, e);\n    }, 500);\n    setLongPressTimer(timer);\n  };\n  const handleTouchMove = (e, message) => {\n    if (!touchStartRef.current || message.messageType === \"system\") return;\n    const currentX = e.touches[0].clientX;\n    const deltaX = currentX - touchStartRef.current.x;\n\n    // Only allow swipe in the correct direction\n    const isOwnMessage = message.senderId && user && (message.senderId._id === user.userId || message.senderId === user.userId || message.senderId.toString() === user.userId.toString());\n    const maxSwipe = 60;\n    const swipeThreshold = 30;\n    if (isOwnMessage && deltaX < 0 || !isOwnMessage && deltaX > 0) {\n      const swipeOffset = Math.min(Math.abs(deltaX), maxSwipe) * (deltaX < 0 ? -1 : 1);\n\n      // Update the message transform\n      const messageElement = e.currentTarget;\n      messageElement.style.transform = `translateX(${swipeOffset}px)`;\n\n      // Show/hide swipe indicator\n      const indicator = messageElement.querySelector(\".swipe-indicator\");\n      if (indicator) {\n        indicator.style.opacity = Math.abs(swipeOffset) > swipeThreshold ? \"1\" : \"0\";\n      }\n    }\n  };\n  const handleTouchEnd = (e, message) => {\n    // Clear long press timer\n    if (longPressTimer) {\n      clearTimeout(longPressTimer);\n      setLongPressTimer(null);\n    }\n    if (!touchStartRef.current || message.messageType === \"system\") return;\n    const touchEnd = {\n      x: e.changedTouches[0].clientX,\n      y: e.changedTouches[0].clientY,\n      time: Date.now()\n    };\n    const deltaX = touchEnd.x - touchStartRef.current.x;\n    const deltaY = touchEnd.y - touchStartRef.current.y;\n    const deltaTime = touchEnd.time - touchStartRef.current.time;\n\n    // Reset transform\n    const messageElement = e.currentTarget;\n    messageElement.style.transform = \"translateX(0px)\";\n\n    // Hide swipe indicator\n    const indicator = messageElement.querySelector(\".swipe-indicator\");\n    if (indicator) {\n      indicator.style.opacity = \"0\";\n    }\n\n    // Check for swipe gesture (horizontal swipe > 30px and < 300ms)\n    if (Math.abs(deltaX) > 30 && Math.abs(deltaY) < 50 && deltaTime < 300) {\n      handleReplyToMessage(message);\n    }\n    // Check for double tap (< 300ms and < 10px movement)\n    else if (deltaTime < 300 && Math.abs(deltaX) < 10 && Math.abs(deltaY) < 10) {\n      if (doubleTapTimeoutRef.current) {\n        // This is a double tap\n        clearTimeout(doubleTapTimeoutRef.current);\n        doubleTapTimeoutRef.current = null;\n        handleDoubleTap(message);\n      } else {\n        // This might be the first tap of a double tap\n        doubleTapTimeoutRef.current = setTimeout(() => {\n          doubleTapTimeoutRef.current = null;\n        }, 300);\n      }\n    }\n    touchStartRef.current = null;\n  };\n  if (!isConnected || !user) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      theme: theme,\n      children: /*#__PURE__*/_jsxDEV(EmptyState, {\n        theme: theme,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Connecting to server...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1852,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Please wait while we establish a connection.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1853,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1851,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1850,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Container, {\n    theme: theme,\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      theme: theme,\n      children: [/*#__PURE__*/_jsxDEV(HeaderLeft, {\n        children: [/*#__PURE__*/_jsxDEV(BackButton, {\n          onClick: handleLeaveRoom,\n          theme: theme,\n          children: [/*#__PURE__*/_jsxDEV(FaArrowLeft, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1864,\n            columnNumber: 13\n          }, this), \"Back\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1863,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(RoomInfo, {\n          children: [/*#__PURE__*/_jsxDEV(RoomTitle, {\n            children: [\"Room \", roomId]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1868,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(UserCount, {\n            theme: theme,\n            children: [/*#__PURE__*/_jsxDEV(FaUsers, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1870,\n              columnNumber: 15\n            }, this), roomUsers.length, \"/2\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1869,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1867,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1862,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(HeaderRight, {\n        children: [/*#__PURE__*/_jsxDEV(ActionButton, {\n          onClick: handleClearAllMessages,\n          theme: theme,\n          className: \"danger\",\n          title: \"Clear all messages\",\n          children: /*#__PURE__*/_jsxDEV(FaBroom, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1882,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1876,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ActionButton, {\n          onClick: toggleTheme,\n          theme: theme,\n          title: \"Toggle theme\",\n          children: theme.isDark ? /*#__PURE__*/_jsxDEV(FaSun, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1889,\n            columnNumber: 29\n          }, this) : /*#__PURE__*/_jsxDEV(FaMoon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1889,\n            columnNumber: 41\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1884,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1875,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1861,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ConversationBar, {\n      theme: theme,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"conversation-info\",\n        children: (() => {\n          const otherUser = roomUsers.find(u => u.userId !== (user === null || user === void 0 ? void 0 : user.userId));\n          if (roomUsers.length === 0) {\n            // Loading state\n            return /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                className: \"avatar\",\n                src: getAvatarImage(\"default\"),\n                alt: \"Room avatar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1904,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"details\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"name\",\n                  children: \"Connecting...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1910,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"status\",\n                  children: \"Loading room...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1911,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1909,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true);\n          } else if (roomUsers.length === 1) {\n            // Only you in the room\n            return /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                className: \"avatar\",\n                src: getAvatarImage(\"default\"),\n                alt: \"Waiting\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1919,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"details\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"name\",\n                  children: \"Waiting for someone...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1925,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"status\",\n                  children: [\"Share room \", roomId, \" to invite others\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1926,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1924,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true);\n          } else if (roomUsers.length === 2 && otherUser) {\n            // 1-on-1 conversation\n            return /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                className: \"avatar\",\n                src: getAvatarImage(otherUser.avatar || \"default\"),\n                alt: `${otherUser.username}'s avatar`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1936,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"details\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"name\",\n                  children: otherUser.username\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1942,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"status\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"online-dot\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1944,\n                    columnNumber: 23\n                  }, this), \"Online\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1943,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1941,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true);\n          } else {\n            // Group conversation\n            return /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                className: \"avatar\",\n                src: getAvatarImage(\"group\"),\n                alt: \"Group chat\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1954,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"details\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"name\",\n                  children: [roomUsers.length, \" participants\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1960,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"status\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"online-dot\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1962,\n                    columnNumber: 23\n                  }, this), roomUsers.length, \" online\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1961,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1959,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true);\n          }\n        })()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1896,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"conversation-actions\",\n        children: /*#__PURE__*/_jsxDEV(ActionIcon, {\n          theme: theme,\n          title: \"Room Info\",\n          children: /*#__PURE__*/_jsxDEV(FaInfoCircle, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1974,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1973,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1972,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1895,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ChatArea, {\n      children: [/*#__PURE__*/_jsxDEV(MessagesContainer, {\n        theme: theme,\n        children: [messages.length === 0 ? /*#__PURE__*/_jsxDEV(EmptyState, {\n          theme: theme,\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"No messages yet\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1983,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Start the conversation by sending a message!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1984,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1982,\n          columnNumber: 13\n        }, this) : messages.map((message, index) => {\n          var _message$senderId2, _message$senderId3, _message$senderId4, _messages$find, _messages$find$sender, _messages$find2;\n          const isOwnMessage = message.senderId && user && (message.senderId._id === user.userId || message.senderId === user.userId || message.senderId.toString() === user.userId.toString());\n\n          // Debug: Log message reactions\n          if (message.reactions) {\n            console.log(\"ðŸ’– Message reactions:\", message._id, message.reactions);\n          }\n          return /*#__PURE__*/_jsxDEV(MessageWrapper, {\n            className: \"message-wrapper\",\n            isOwn: isOwnMessage,\n            children: [/*#__PURE__*/_jsxDEV(Message, {\n              isOwn: isOwnMessage,\n              isSystem: message.messageType === \"system\",\n              onMouseDown: e => handleMouseDown(message, e),\n              onMouseUp: handleMouseUp,\n              onMouseLeave: handleMouseUp,\n              onTouchStart: e => handleTouchStart(e, message),\n              onTouchEnd: e => handleTouchEnd(e, message),\n              onTouchCancel: e => handleTouchEnd(e, message),\n              onContextMenu: e => {\n                e.preventDefault();\n                handleLongPress(message, e);\n              },\n              children: [message.messageType !== \"system\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(SwipeIndicator, {\n                  className: \"swipe-indicator\",\n                  isOwn: isOwnMessage,\n                  show: false,\n                  children: /*#__PURE__*/_jsxDEV(FaReply, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2031,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2026,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(Avatar, {\n                  src: getAvatarImage((_message$senderId2 = message.senderId) === null || _message$senderId2 === void 0 ? void 0 : _message$senderId2.avatar),\n                  alt: `${((_message$senderId3 = message.senderId) === null || _message$senderId3 === void 0 ? void 0 : _message$senderId3.username) || \"User\"} avatar`,\n                  theme: theme\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2033,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true), /*#__PURE__*/_jsxDEV(MessageBubbleContainer, {\n                isOwn: isOwnMessage,\n                children: [message.messageType !== \"system\" && /*#__PURE__*/_jsxDEV(MessageHeader, {\n                  isOwn: isOwnMessage,\n                  children: [/*#__PURE__*/_jsxDEV(Username, {\n                    theme: theme,\n                    children: ((_message$senderId4 = message.senderId) === null || _message$senderId4 === void 0 ? void 0 : _message$senderId4.username) || \"Unknown\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2044,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(Timestamp, {\n                    theme: theme,\n                    children: [new Date(message.timestamp || message.createdAt).toLocaleTimeString(\"en-US\", {\n                      hour: \"2-digit\",\n                      minute: \"2-digit\",\n                      hour12: true\n                    }), message.isEdited && /*#__PURE__*/_jsxDEV(\"span\", {\n                      style: {\n                        marginLeft: \"5px\",\n                        fontSize: \"0.7rem\"\n                      },\n                      children: \"(edited)\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2056,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2047,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2043,\n                  columnNumber: 25\n                }, this), editingMessageId === message._id ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(EditInput, {\n                    value: editingContent,\n                    onChange: e => setEditingContent(e.target.value),\n                    onKeyDown: e => {\n                      if (e.key === \"Enter\") {\n                        handleSaveEdit();\n                      } else if (e.key === \"Escape\") {\n                        handleCancelEdit();\n                      }\n                    },\n                    theme: theme,\n                    autoFocus: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2071,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(EditActions, {\n                    children: [/*#__PURE__*/_jsxDEV(EditActionButton, {\n                      onClick: handleCancelEdit,\n                      theme: theme,\n                      children: [/*#__PURE__*/_jsxDEV(FaTimes, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2089,\n                        columnNumber: 31\n                      }, this), \" Cancel\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2085,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(EditActionButton, {\n                      onClick: handleSaveEdit,\n                      primary: true,\n                      theme: theme,\n                      children: [/*#__PURE__*/_jsxDEV(FaCheck, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2096,\n                        columnNumber: 31\n                      }, this), \" Save\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2091,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2084,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2070,\n                  columnNumber: 25\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [message.replyTo && /*#__PURE__*/_jsxDEV(ReplyMessagePreview, {\n                    theme: theme,\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"reply-username\",\n                      children: ((_messages$find = messages.find(m => m._id === message.replyTo)) === null || _messages$find === void 0 ? void 0 : (_messages$find$sender = _messages$find.senderId) === null || _messages$find$sender === void 0 ? void 0 : _messages$find$sender.username) || \"Unknown\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2105,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"reply-content\",\n                      children: ((_messages$find2 = messages.find(m => m._id === message.replyTo)) === null || _messages$find2 === void 0 ? void 0 : _messages$find2.content) || \"Message not found\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2109,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2104,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(MessageContent, {\n                    isOwn: isOwnMessage,\n                    isSystem: message.messageType === \"system\",\n                    theme: theme,\n                    children: message.content\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2115,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2101,\n                  columnNumber: 25\n                }, this), message.messageType !== \"system\" && message.reactions && message.reactions.heart > 0 && /*#__PURE__*/_jsxDEV(MessageReactions, {\n                  isOwn: isOwnMessage,\n                  children: /*#__PURE__*/_jsxDEV(ReactionButton, {\n                    theme: theme,\n                    title: \"Liked\",\n                    children: /*#__PURE__*/_jsxDEV(FaHeart, {\n                      style: {\n                        color: \"#e74c3c\",\n                        fontSize: \"16px\"\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2131,\n                      columnNumber: 31\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2130,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2129,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2041,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2010,\n              columnNumber: 19\n            }, this), isOwnMessage && message.messageType !== \"system\" && editingMessageId !== message._id && /*#__PURE__*/_jsxDEV(MessageActions, {\n              className: \"message-actions\",\n              children: [/*#__PURE__*/_jsxDEV(MessageActionButton, {\n                onClick: () => handleEditMessage(message._id, message.content),\n                theme: theme,\n                title: \"Edit message\",\n                children: [/*#__PURE__*/_jsxDEV(FaEdit, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2152,\n                  columnNumber: 27\n                }, this), \" Edit\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2145,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(MessageActionButton, {\n                onClick: () => handleDeleteMessage(message._id),\n                theme: theme,\n                className: \"danger\",\n                title: \"Delete message\",\n                children: [/*#__PURE__*/_jsxDEV(FaTrash, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2160,\n                  columnNumber: 27\n                }, this), \" Delete\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2154,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2144,\n              columnNumber: 23\n            }, this)]\n          }, message._id || index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2005,\n            columnNumber: 17\n          }, this);\n        }), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: messagesEndRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2169,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1980,\n        columnNumber: 9\n      }, this), typingUsers.length > 0 && /*#__PURE__*/_jsxDEV(TypingIndicator, {\n        theme: theme,\n        children: [typingUsers.length === 1 ? /*#__PURE__*/_jsxDEV(\"img\", {\n          src: getAvatarImage(typingUsers[0].avatar),\n          alt: `${typingUsers[0].username} avatar`,\n          style: {\n            width: \"24px\",\n            height: \"24px\",\n            borderRadius: \"50%\",\n            border: \"2px solid #007bff\",\n            objectFit: \"cover\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2175,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            marginLeft: \"-8px\"\n          },\n          children: typingUsers.slice(0, 3).map((user, index) => /*#__PURE__*/_jsxDEV(\"img\", {\n            src: getAvatarImage(user.avatar),\n            alt: `${user.username} avatar`,\n            style: {\n              width: \"20px\",\n              height: \"20px\",\n              borderRadius: \"50%\",\n              border: \"2px solid #007bff\",\n              objectFit: \"cover\",\n              marginLeft: index > 0 ? \"-6px\" : \"0\",\n              zIndex: 3 - index\n            }\n          }, user.userId, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2189,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2187,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(TypingDots, {\n          theme: theme,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2207,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2208,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2209,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2206,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: typingUsers.map(user => user.username).join(\", \")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2212,\n            columnNumber: 15\n          }, this), \" \", typingUsers.length === 1 ? \"is\" : \"are\", \" typing...\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2211,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2173,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(InputArea, {\n        theme: theme,\n        children: [replyingTo && /*#__PURE__*/_jsxDEV(ReplyPreview, {\n          theme: theme,\n          children: [/*#__PURE__*/_jsxDEV(ReplyContent, {\n            theme: theme,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"reply-to\",\n              children: [\"Replying to \", replyingTo.username]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2224,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"reply-message\",\n              children: replyingTo.content\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2227,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2223,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(ReplyCloseButton, {\n            onClick: handleCancelReply,\n            theme: theme,\n            children: /*#__PURE__*/_jsxDEV(FaTimes, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2230,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2229,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2222,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(InputContainer, {\n          children: [/*#__PURE__*/_jsxDEV(Input, {\n            type: \"text\",\n            value: newMessage,\n            onChange: handleInputChange,\n            onKeyDown: handleInputKeyDown,\n            placeholder: replyingTo ? `Reply to ${replyingTo.username}...` : \"Type your message...\",\n            theme: theme\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2235,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(InputActions, {\n            children: [/*#__PURE__*/_jsxDEV(ActionIcon, {\n              theme: theme,\n              title: \"Add emoji\",\n              children: /*#__PURE__*/_jsxDEV(FaSmile, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2249,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2248,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ActionIcon, {\n              theme: theme,\n              title: \"Attach image\",\n              children: /*#__PURE__*/_jsxDEV(FaImage, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2252,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2251,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2247,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(SendButton, {\n            onClick: handleSendMessage,\n            disabled: !newMessage.trim(),\n            theme: theme,\n            children: /*#__PURE__*/_jsxDEV(FaPaperPlane, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2260,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2255,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2234,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2220,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1979,\n      columnNumber: 7\n    }, this), contextMenu && /*#__PURE__*/_jsxDEV(ContextMenuOverlay, {\n      onClick: closeContextMenu,\n      children: /*#__PURE__*/_jsxDEV(ContextMenuContainer, {\n        theme: theme,\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(MessagePreview, {\n          theme: theme,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"preview-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              className: \"avatar\",\n              src: getAvatarImage((_contextMenu$message$ = contextMenu.message.senderId) === null || _contextMenu$message$ === void 0 ? void 0 : _contextMenu$message$.avatar),\n              alt: `${((_contextMenu$message$2 = contextMenu.message.senderId) === null || _contextMenu$message$2 === void 0 ? void 0 : _contextMenu$message$2.username) || \"User\"} avatar`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2275,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"username\",\n              children: ((_contextMenu$message$3 = contextMenu.message.senderId) === null || _contextMenu$message$3 === void 0 ? void 0 : _contextMenu$message$3.username) || \"Unknown\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2282,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"timestamp\",\n              children: new Date(contextMenu.message.timestamp || contextMenu.message.createdAt).toLocaleTimeString(\"en-US\", {\n                hour: \"2-digit\",\n                minute: \"2-digit\",\n                hour12: true\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2285,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2274,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"preview-content\",\n            children: contextMenu.message.content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2296,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2273,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ContextMenuGrid, {\n          children: contextMenuItems.map(item => {\n            const Icon = item.icon;\n            const isOwn = contextMenu.message.senderId && user && (contextMenu.message.senderId._id === user.userId || contextMenu.message.senderId === user.userId || contextMenu.message.senderId.toString() === user.userId.toString());\n\n            // Hide edit/delete for non-own messages\n            if ((item.id === \"edit\" || item.id === \"delete\") && !isOwn) {\n              return null;\n            }\n            return /*#__PURE__*/_jsxDEV(ContextMenuItem, {\n              theme: theme,\n              danger: item.danger,\n              primary: item.primary,\n              onClick: () => handleContextAction(item.id, contextMenu.message),\n              children: [/*#__PURE__*/_jsxDEV(Icon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2327,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: item.label\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2328,\n                columnNumber: 21\n              }, this)]\n            }, item.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2318,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2301,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2269,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2268,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1860,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatRoom, \"h0nhWuid+1YpcRmj2TgJGndBBD8=\", false, function () {\n  return [useParams, useNavigate, useSocket, useChat, useTheme];\n});\n_c45 = ChatRoom;\nexport default ChatRoom;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10, _c11, _c12, _c13, _c14, _c15, _c16, _c17, _c18, _c19, _c20, _c21, _c22, _c23, _c24, _c25, _c26, _c27, _c28, _c29, _c30, _c31, _c32, _c33, _c34, _c35, _c36, _c37, _c38, _c39, _c40, _c41, _c42, _c43, _c44, _c45;\n$RefreshReg$(_c, \"Container\");\n$RefreshReg$(_c2, \"Header\");\n$RefreshReg$(_c3, \"HeaderLeft\");\n$RefreshReg$(_c4, \"BackButton\");\n$RefreshReg$(_c5, \"RoomInfo\");\n$RefreshReg$(_c6, \"RoomTitle\");\n$RefreshReg$(_c7, \"UserCount\");\n$RefreshReg$(_c8, \"HeaderRight\");\n$RefreshReg$(_c9, \"ActionButton\");\n$RefreshReg$(_c0, \"MessageWrapper\");\n$RefreshReg$(_c1, \"MessageActions\");\n$RefreshReg$(_c10, \"MessageActionButton\");\n$RefreshReg$(_c11, \"EditInput\");\n$RefreshReg$(_c12, \"EditActions\");\n$RefreshReg$(_c13, \"EditActionButton\");\n$RefreshReg$(_c14, \"ChatArea\");\n$RefreshReg$(_c15, \"MessagesContainer\");\n$RefreshReg$(_c16, \"Message\");\n$RefreshReg$(_c17, \"MessageBubbleContainer\");\n$RefreshReg$(_c18, \"MessageHeader\");\n$RefreshReg$(_c19, \"Avatar\");\n$RefreshReg$(_c20, \"Username\");\n$RefreshReg$(_c21, \"Timestamp\");\n$RefreshReg$(_c22, \"MessageContent\");\n$RefreshReg$(_c23, \"TypingIndicator\");\n$RefreshReg$(_c24, \"TypingDots\");\n$RefreshReg$(_c25, \"InputArea\");\n$RefreshReg$(_c26, \"InputContainer\");\n$RefreshReg$(_c27, \"Input\");\n$RefreshReg$(_c28, \"SendButton\");\n$RefreshReg$(_c29, \"EmptyState\");\n$RefreshReg$(_c30, \"ReplyPreview\");\n$RefreshReg$(_c31, \"ReplyContent\");\n$RefreshReg$(_c32, \"ReplyCloseButton\");\n$RefreshReg$(_c33, \"SwipeIndicator\");\n$RefreshReg$(_c34, \"ReplyMessagePreview\");\n$RefreshReg$(_c35, \"MessageReactions\");\n$RefreshReg$(_c36, \"ReactionButton\");\n$RefreshReg$(_c37, \"InputActions\");\n$RefreshReg$(_c38, \"ActionIcon\");\n$RefreshReg$(_c39, \"ContextMenuOverlay\");\n$RefreshReg$(_c40, \"ContextMenuContainer\");\n$RefreshReg$(_c41, \"ContextMenuGrid\");\n$RefreshReg$(_c42, \"ContextMenuItem\");\n$RefreshReg$(_c43, \"MessagePreview\");\n$RefreshReg$(_c44, \"ConversationBar\");\n$RefreshReg$(_c45, \"ChatRoom\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useParams","useNavigate","styled","useSocket","useChat","useTheme","FaSun","FaMoon","FaArrowLeft","FaPaperPlane","FaUsers","FaEdit","FaTrash","FaBroom","FaCheck","FaTimes","FaSmile","FaImage","FaReply","FaHeart","FaCopy","FaShare","FaStar","FaThumbtack","FaInfoCircle","FaQuoteLeft","FaLanguage","FaSave","FaFlag","FaShareAlt","getAvatarImage","jsxDEV","_jsxDEV","Fragment","_Fragment","Container","div","props","theme","isDark","_c","Header","_c2","HeaderLeft","_c3","BackButton","button","_c4","RoomInfo","_c5","RoomTitle","h2","_c6","UserCount","_c7","HeaderRight","_c8","ActionButton","_c9","MessageWrapper","isOwn","_c0","MessageActions","_c1","MessageActionButton","_c10","EditInput","input","_c11","EditActions","_c12","EditActionButton","primary","_c13","ChatArea","_c14","MessagesContainer","_c15","Message","swipeOffset","isSystem","_c16","MessageBubbleContainer","_c17","MessageHeader","_c18","Avatar","img","_c19","Username","span","_c20","Timestamp","_c21","MessageContent","_c22","TypingIndicator","_c23","TypingDots","_c24","InputArea","_c25","InputContainer","_c26","Input","_c27","SendButton","disabled","_c28","EmptyState","_c29","ReplyPreview","_c30","ReplyContent","_c31","ReplyCloseButton","_c32","SwipeIndicator","show","_c33","ReplyMessagePreview","_c34","MessageReactions","_c35","ReactionButton","_c36","InputActions","_c37","ActionIcon","_c38","ContextMenuOverlay","_c39","ContextMenuContainer","_c40","ContextMenuGrid","_c41","ContextMenuItem","danger","_c42","MessagePreview","_c43","ConversationBar","_c44","ChatRoom","_s","_contextMenu$message$","_contextMenu$message$2","_contextMenu$message$3","roomId","navigate","socket","leaveRoom","joinRoom","isConnected","sendMessage","startTyping","stopTyping","user","messages","typingUsers","roomUsers","toggleTheme","newMessage","setNewMessage","isTyping","setIsTyping","editingMessageId","setEditingMessageId","editingContent","setEditingContent","replyingTo","setReplyingTo","contextMenu","setContextMenu","longPressTimer","setLongPressTimer","messagesEndRef","typingTimeoutRef","touchStartRef","touchEndRef","doubleTapTimeoutRef","console","log","username","messagesCount","length","typingUsersCount","roomUsersCount","joinCurrentRoom","error","scrollToBottom","clearTimeout","current","handleKeyDown","e","key","closeContextMenu","document","addEventListener","removeEventListener","_messagesEndRef$curre","scrollIntoView","behavior","handleSendMessage","preventDefault","trim","emit","content","replyTo","id","err","handleInputChange","target","value","setTimeout","handleInputKeyDown","handleLeaveRoom","handleEditMessage","messageId","currentContent","handleLongPress","message","event","x","clientX","touches","y","clientY","handleMouseDown","timer","handleMouseUp","handleContextAction","action","navigator","clipboard","writeText","userId","handleDeleteMessage","_id","reaction","savedMessages","JSON","parse","localStorage","getItem","push","setItem","stringify","share","title","text","contextMenuItems","label","icon","handleSaveEdit","newContent","handleCancelEdit","window","confirm","handleClearAllMessages","handleReplyToMessage","_message$senderId","senderId","handleCancelReply","handleDoubleTap","messageType","handleTouchStart","time","Date","now","handleTouchMove","currentX","deltaX","isOwnMessage","toString","maxSwipe","swipeThreshold","Math","min","abs","messageElement","currentTarget","style","transform","indicator","querySelector","opacity","handleTouchEnd","touchEnd","changedTouches","deltaY","deltaTime","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","className","otherUser","find","u","src","alt","avatar","map","index","_message$senderId2","_message$senderId3","_message$senderId4","_messages$find","_messages$find$sender","_messages$find2","reactions","onMouseDown","onMouseUp","onMouseLeave","onTouchStart","onTouchEnd","onTouchCancel","onContextMenu","timestamp","createdAt","toLocaleTimeString","hour","minute","hour12","isEdited","marginLeft","fontSize","onChange","onKeyDown","autoFocus","m","heart","color","ref","width","height","borderRadius","border","objectFit","display","slice","zIndex","join","type","placeholder","stopPropagation","item","Icon","_c45","$RefreshReg$"],"sources":["D:/Sanjeevchatpersonal/frontend/src/components/ChatRoom.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport styled from \"styled-components\";\r\nimport { useSocket } from \"../contexts/SocketContext\";\r\nimport { useChat } from \"../contexts/ChatContext\";\r\nimport { useTheme } from \"../contexts/ThemeContext\";\r\nimport {\r\n  FaSun,\r\n  FaMoon,\r\n  FaArrowLeft,\r\n  FaPaperPlane,\r\n  FaUsers,\r\n  FaEdit,\r\n  FaTrash,\r\n  FaBroom,\r\n  FaCheck,\r\n  FaTimes,\r\n  FaSmile,\r\n  FaImage,\r\n  FaReply,\r\n  FaHeart,\r\n  FaCopy,\r\n  FaShare,\r\n  FaStar,\r\n  FaThumbtack,\r\n  FaInfoCircle,\r\n  FaQuoteLeft,\r\n  FaLanguage,\r\n  FaSave,\r\n  FaFlag,\r\n  FaShareAlt,\r\n} from \"react-icons/fa\";\r\nimport { getAvatarImage } from \"../utils/avatarUtils\";\r\n\r\nconst Container = styled.div`\r\n  height: 100vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n  background: ${(props) =>\r\n    props.theme.isDark\r\n      ? \"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)\"\r\n      : \"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)\"};\r\n  color: ${(props) => (props.theme.isDark ? \"#ffffff\" : \"#333333\")};\r\n  transition: all 0.3s ease;\r\n  position: relative;\r\n\r\n  &::before {\r\n    content: \"\";\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    background: ${(props) =>\r\n      props.theme.isDark\r\n        ? \"radial-gradient(circle at 20% 80%, rgba(0, 123, 255, 0.1) 0%, transparent 50%), radial-gradient(circle at 80% 20%, rgba(40, 167, 69, 0.1) 0%, transparent 50%)\"\r\n        : \"radial-gradient(circle at 20% 80%, rgba(0, 123, 255, 0.05) 0%, transparent 50%), radial-gradient(circle at 80% 20%, rgba(40, 167, 69, 0.05) 0%, transparent 50%)\"};\r\n    pointer-events: none;\r\n    z-index: 0;\r\n  }\r\n\r\n  > * {\r\n    position: relative;\r\n    z-index: 1;\r\n  }\r\n`;\r\n\r\nconst Header = styled.div`\r\n  background: ${(props) =>\r\n    props.theme.isDark\r\n      ? \"linear-gradient(135deg, rgba(45, 45, 45, 0.95) 0%, rgba(60, 60, 60, 0.95) 100%)\"\r\n      : \"linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 249, 250, 0.95) 100%)\"};\r\n  backdrop-filter: blur(20px);\r\n  padding: 20px 25px;\r\n  border-bottom: 1px solid\r\n    ${(props) =>\r\n      props.theme.isDark\r\n        ? \"rgba(68, 68, 68, 0.5)\"\r\n        : \"rgba(224, 224, 224, 0.5)\"};\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  box-shadow: ${(props) =>\r\n    props.theme.isDark\r\n      ? \"0 8px 32px rgba(0, 0, 0, 0.3), 0 2px 8px rgba(0, 0, 0, 0.2)\"\r\n      : \"0 8px 32px rgba(0, 0, 0, 0.1), 0 2px 8px rgba(0, 0, 0, 0.05)\"};\r\n  border-radius: 0 0 20px 20px;\r\n\r\n  @media (max-width: 768px) {\r\n    padding: 15px 20px;\r\n    border-radius: 0 0 15px 15px;\r\n  }\r\n\r\n  @media (max-width: 480px) {\r\n    padding: 12px 15px;\r\n    border-radius: 0 0 12px 12px;\r\n  }\r\n`;\r\n\r\nconst HeaderLeft = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 20px;\r\n\r\n  @media (max-width: 768px) {\r\n    gap: 15px;\r\n  }\r\n\r\n  @media (max-width: 480px) {\r\n    gap: 10px;\r\n  }\r\n`;\r\n\r\nconst BackButton = styled.button`\r\n  background: ${(props) =>\r\n    props.theme.isDark\r\n      ? \"linear-gradient(135deg, #444 0%, #555 100%)\"\r\n      : \"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)\"};\r\n  border: 1px solid\r\n    ${(props) =>\r\n      props.theme.isDark\r\n        ? \"rgba(85, 85, 85, 0.5)\"\r\n        : \"rgba(222, 226, 230, 0.5)\"};\r\n  color: ${(props) => (props.theme.isDark ? \"#fff\" : \"#333\")};\r\n  padding: 10px 16px;\r\n  border-radius: 12px;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  box-shadow: ${(props) =>\r\n    props.theme.isDark\r\n      ? \"0 4px 12px rgba(0, 0, 0, 0.3)\"\r\n      : \"0 4px 12px rgba(0, 0, 0, 0.1)\"};\r\n\r\n  &:hover {\r\n    background: ${(props) =>\r\n      props.theme.isDark\r\n        ? \"linear-gradient(135deg, #555 0%, #666 100%)\"\r\n        : \"linear-gradient(135deg, #e9ecef 0%, #dee2e6 100%)\"};\r\n    transform: translateY(-2px);\r\n    box-shadow: ${(props) =>\r\n      props.theme.isDark\r\n        ? \"0 6px 20px rgba(0, 0, 0, 0.4)\"\r\n        : \"0 6px 20px rgba(0, 0, 0, 0.15)\"};\r\n  }\r\n\r\n  &:active {\r\n    transform: translateY(0);\r\n  }\r\n`;\r\n\r\nconst RoomInfo = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n`;\r\n\r\nconst RoomTitle = styled.h2`\r\n  margin: 0;\r\n  font-size: 1.6rem;\r\n  font-weight: 700;\r\n  background: ${(props) =>\r\n    props.theme.isDark\r\n      ? \"linear-gradient(135deg, #ffffff 0%, #e0e0e0 100%)\"\r\n      : \"linear-gradient(135deg, #333333 0%, #555555 100%)\"};\r\n  -webkit-background-clip: text;\r\n  -webkit-text-fill-color: transparent;\r\n  background-clip: text;\r\n  letter-spacing: -0.5px;\r\n\r\n  @media (max-width: 768px) {\r\n    font-size: 1.4rem;\r\n  }\r\n\r\n  @media (max-width: 480px) {\r\n    font-size: 1.2rem;\r\n  }\r\n`;\r\n\r\nconst UserCount = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 6px;\r\n  color: ${(props) => (props.theme.isDark ? \"#ccc\" : \"#666\")};\r\n  font-size: 0.9rem;\r\n  background: ${(props) =>\r\n    props.theme.isDark ? \"rgba(0, 123, 255, 0.1)\" : \"rgba(0, 123, 255, 0.05)\"};\r\n  padding: 6px 12px;\r\n  border-radius: 20px;\r\n  border: 1px solid\r\n    ${(props) =>\r\n      props.theme.isDark ? \"rgba(0, 123, 255, 0.2)\" : \"rgba(0, 123, 255, 0.1)\"};\r\n  font-weight: 500;\r\n\r\n  svg {\r\n    color: #007bff;\r\n  }\r\n`;\r\n\r\nconst HeaderRight = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n`;\r\n\r\nconst ActionButton = styled.button`\r\n  background: ${(props) => (props.theme.isDark ? \"#333\" : \"#fff\")};\r\n  border: 2px solid ${(props) => (props.theme.isDark ? \"#555\" : \"#ddd\")};\r\n  color: ${(props) => (props.theme.isDark ? \"#fff\" : \"#333\")};\r\n  border-radius: 50%;\r\n  width: 40px;\r\n  height: 40px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n  font-size: 16px;\r\n\r\n  &:hover {\r\n    transform: scale(1.1);\r\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\r\n  }\r\n\r\n  &.danger {\r\n    border-color: #dc3545;\r\n    color: #dc3545;\r\n\r\n    &:hover {\r\n      background: #dc3545;\r\n      color: white;\r\n    }\r\n  }\r\n`;\r\n\r\nconst MessageWrapper = styled.div`\r\n  position: relative;\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin-bottom: 4px;\r\n  transition: all 0.2s ease;\r\n\r\n  &:hover {\r\n    transform: translateX(${(props) => (props.isOwn ? \"-2px\" : \"2px\")});\r\n  }\r\n\r\n  &.message-wrapper:hover .message-actions {\r\n    opacity: 1;\r\n    transform: translateY(0);\r\n  }\r\n`;\r\n\r\nconst MessageActions = styled.div`\r\n  opacity: 0;\r\n  transition: all 0.3s ease;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 6px;\r\n  margin-top: 8px;\r\n  transform: translateY(5px);\r\n\r\n  .message-wrapper:hover & {\r\n    opacity: 1;\r\n    transform: translateY(0);\r\n  }\r\n`;\r\n\r\nconst MessageActionButton = styled.button`\r\n  background: ${(props) =>\r\n    props.theme.isDark ? \"rgba(68, 68, 68, 0.8)\" : \"rgba(248, 249, 250, 0.9)\"};\r\n  backdrop-filter: blur(10px);\r\n  border: 1px solid\r\n    ${(props) =>\r\n      props.theme.isDark\r\n        ? \"rgba(85, 85, 85, 0.5)\"\r\n        : \"rgba(222, 226, 230, 0.5)\"};\r\n  color: ${(props) => (props.theme.isDark ? \"#fff\" : \"#333\")};\r\n  border-radius: 8px;\r\n  padding: 6px 10px;\r\n  cursor: pointer;\r\n  font-size: 12px;\r\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n  font-weight: 500;\r\n  box-shadow: ${(props) =>\r\n    props.theme.isDark\r\n      ? \"0 2px 8px rgba(0, 0, 0, 0.3)\"\r\n      : \"0 2px 8px rgba(0, 0, 0, 0.1)\"};\r\n\r\n  &:hover {\r\n    background: ${(props) =>\r\n      props.theme.isDark\r\n        ? \"rgba(85, 85, 85, 0.9)\"\r\n        : \"rgba(233, 236, 239, 0.9)\"};\r\n    transform: translateY(-2px);\r\n    box-shadow: ${(props) =>\r\n      props.theme.isDark\r\n        ? \"0 4px 12px rgba(0, 0, 0, 0.4)\"\r\n        : \"0 4px 12px rgba(0, 0, 0, 0.15)\"};\r\n  }\r\n\r\n  &.danger {\r\n    color: #dc3545;\r\n    border-color: rgba(220, 53, 69, 0.3);\r\n\r\n    &:hover {\r\n      background: rgba(220, 53, 69, 0.1);\r\n      border-color: #dc3545;\r\n      color: #dc3545;\r\n    }\r\n  }\r\n\r\n  &:active {\r\n    transform: translateY(0);\r\n  }\r\n`;\r\n\r\nconst EditInput = styled.input`\r\n  background: ${(props) => (props.theme.isDark ? \"#3d3d3d\" : \"#ffffff\")};\r\n  border: 2px solid #007bff;\r\n  color: ${(props) => (props.theme.isDark ? \"#ffffff\" : \"#333333\")};\r\n  padding: 8px 12px;\r\n  border-radius: 12px;\r\n  font-size: 0.95rem;\r\n  width: 100%;\r\n\r\n  &:focus {\r\n    outline: none;\r\n    box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);\r\n  }\r\n`;\r\n\r\nconst EditActions = styled.div`\r\n  display: flex;\r\n  gap: 8px;\r\n  margin-top: 8px;\r\n  justify-content: flex-end;\r\n`;\r\n\r\nconst EditActionButton = styled.button`\r\n  background: ${(props) => (props.primary ? \"#007bff\" : \"transparent\")};\r\n  border: 1px solid ${(props) => (props.primary ? \"#007bff\" : \"#ccc\")};\r\n  color: ${(props) =>\r\n    props.primary ? \"white\" : props.theme.isDark ? \"#fff\" : \"#333\"};\r\n  border-radius: 4px;\r\n  padding: 4px 8px;\r\n  cursor: pointer;\r\n  font-size: 12px;\r\n  transition: all 0.2s ease;\r\n\r\n  &:hover {\r\n    background: ${(props) =>\r\n      props.primary ? \"#0056b3\" : props.theme.isDark ? \"#444\" : \"#f8f9fa\"};\r\n  }\r\n`;\r\n\r\nconst ChatArea = styled.div`\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n  position: relative;\r\n`;\r\n\r\nconst MessagesContainer = styled.div`\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  padding: 16px;\r\n  padding-bottom: 80px; /* Extra space for typing indicator */\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 4px;\r\n\r\n  &::-webkit-scrollbar {\r\n    width: 8px;\r\n  }\r\n\r\n  &::-webkit-scrollbar-track {\r\n    background: ${(props) => (props.theme.isDark ? \"#2d2d2d\" : \"#f1f1f1\")};\r\n  }\r\n\r\n  &::-webkit-scrollbar-thumb {\r\n    background: ${(props) => (props.theme.isDark ? \"#555\" : \"#c1c1c1\")};\r\n    border-radius: 4px;\r\n  }\r\n\r\n  &::-webkit-scrollbar-thumb:hover {\r\n    background: ${(props) => (props.theme.isDark ? \"#666\" : \"#a8a8a8\")};\r\n  }\r\n\r\n  @media (max-width: 768px) {\r\n    padding: 12px;\r\n    padding-bottom: 70px;\r\n    gap: 3px;\r\n  }\r\n\r\n  @media (max-width: 480px) {\r\n    padding: 8px;\r\n    padding-bottom: 60px;\r\n    gap: 2px;\r\n  }\r\n`;\r\n\r\nconst Message = styled.div`\r\n  display: flex;\r\n  align-items: flex-start;\r\n  gap: 12px;\r\n  max-width: 100%;\r\n  margin-bottom: 12px;\r\n  flex-direction: ${(props) => (props.isOwn ? \"row-reverse\" : \"row\")};\r\n  animation: messageSlideIn 0.3s ease-out;\r\n  transform: translateX(${(props) => props.swipeOffset || 0}px);\r\n  transition: transform 0.2s ease-out;\r\n  position: relative;\r\n\r\n  @keyframes messageSlideIn {\r\n    from {\r\n      opacity: 0;\r\n      transform: translateY(20px);\r\n    }\r\n    to {\r\n      opacity: 1;\r\n      transform: translateY(0);\r\n    }\r\n  }\r\n\r\n  ${(props) =>\r\n    props.isSystem &&\r\n    `\r\n    justify-content: center;\r\n    margin: 8px 0;\r\n  `}\r\n\r\n  @media (max-width: 768px) {\r\n    gap: 10px;\r\n    margin-bottom: 10px;\r\n  }\r\n`;\r\n\r\nconst MessageBubbleContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  max-width: 70%;\r\n  align-items: ${(props) => (props.isOwn ? \"flex-end\" : \"flex-start\")};\r\n\r\n  @media (max-width: 768px) {\r\n    max-width: 80%;\r\n  }\r\n\r\n  @media (max-width: 480px) {\r\n    max-width: 85%;\r\n  }\r\n`;\r\n\r\nconst MessageHeader = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 6px;\r\n  margin-bottom: 2px;\r\n  flex-direction: ${(props) => (props.isOwn ? \"row-reverse\" : \"row\")};\r\n`;\r\n\r\nconst Avatar = styled.img`\r\n  width: 44px;\r\n  height: 44px;\r\n  border-radius: 50%;\r\n  object-fit: cover;\r\n  border: 3px solid\r\n    ${(props) =>\r\n      props.theme.isDark ? \"rgba(255, 255, 255, 0.2)\" : \"rgba(0, 0, 0, 0.1)\"};\r\n  flex-shrink: 0;\r\n  transition: all 0.3s ease;\r\n  box-shadow: ${(props) =>\r\n    props.theme.isDark\r\n      ? \"0 4px 12px rgba(0, 0, 0, 0.3)\"\r\n      : \"0 4px 12px rgba(0, 0, 0, 0.1)\"};\r\n\r\n  &:hover {\r\n    transform: scale(1.1);\r\n    border-color: #007bff;\r\n    box-shadow: ${(props) =>\r\n      props.theme.isDark\r\n        ? \"0 6px 20px rgba(0, 123, 255, 0.3)\"\r\n        : \"0 6px 20px rgba(0, 123, 255, 0.2)\"};\r\n  }\r\n\r\n  @media (max-width: 480px) {\r\n    width: 40px;\r\n    height: 40px;\r\n  }\r\n`;\r\n\r\nconst Username = styled.span`\r\n  font-weight: 600;\r\n  font-size: 0.85rem;\r\n  color: ${(props) => (props.theme.isDark ? \"#ccc\" : \"#666\")};\r\n\r\n  @media (max-width: 480px) {\r\n    font-size: 0.8rem;\r\n  }\r\n`;\r\n\r\nconst Timestamp = styled.span`\r\n  font-size: 0.75rem;\r\n  color: ${(props) => (props.theme.isDark ? \"#888\" : \"#999\")};\r\n  margin-left: 8px;\r\n\r\n  @media (max-width: 480px) {\r\n    font-size: 0.7rem;\r\n  }\r\n`;\r\n\r\nconst MessageContent = styled.div`\r\n  background: ${(props) => {\r\n    if (props.isSystem) return \"transparent\";\r\n    if (props.isOwn)\r\n      return props.theme.isDark\r\n        ? \"linear-gradient(135deg, #007bff 0%, #0056b3 100%)\"\r\n        : \"linear-gradient(135deg, #007bff 0%, #0056b3 100%)\";\r\n    return props.theme.isDark\r\n      ? \"linear-gradient(135deg, #404040 0%, #4a4a4a 100%)\"\r\n      : \"linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%)\";\r\n  }};\r\n\r\n  color: ${(props) => {\r\n    if (props.isSystem) return props.theme.isDark ? \"#888\" : \"#666\";\r\n    if (props.isOwn) return \"#ffffff\";\r\n    return props.theme.isDark ? \"#ffffff\" : \"#333333\";\r\n  }};\r\n\r\n  padding: ${(props) => (props.isSystem ? \"8px 16px\" : \"12px 16px\")};\r\n\r\n  border-radius: ${(props) => {\r\n    if (props.isSystem) return \"25px\";\r\n    if (props.isOwn) return \"20px 20px 6px 20px\";\r\n    return \"20px 20px 20px 6px\";\r\n  }};\r\n\r\n  border: ${(props) => {\r\n    if (props.isSystem)\r\n      return `2px dashed ${props.theme.isDark ? \"#555\" : \"#ccc\"}`;\r\n    if (!props.isOwn && !props.isSystem)\r\n      return props.theme.isDark\r\n        ? \"1px solid rgba(255, 255, 255, 0.1)\"\r\n        : \"1px solid rgba(0, 0, 0, 0.05)\";\r\n    return \"none\";\r\n  }};\r\n\r\n  word-wrap: break-word;\r\n  font-size: 0.95rem;\r\n  line-height: 1.5;\r\n  font-style: ${(props) => (props.isSystem ? \"italic\" : \"normal\")};\r\n  text-align: ${(props) => (props.isSystem ? \"center\" : \"left\")};\r\n  font-weight: ${(props) => (props.isSystem ? \"400\" : \"500\")};\r\n\r\n  box-shadow: ${(props) => {\r\n    if (props.isSystem) return \"none\";\r\n    if (props.isOwn)\r\n      return props.theme.isDark\r\n        ? \"0 4px 12px rgba(0, 123, 255, 0.3), 0 2px 4px rgba(0, 0, 0, 0.2)\"\r\n        : \"0 4px 12px rgba(0, 123, 255, 0.2), 0 2px 4px rgba(0, 0, 0, 0.1)\";\r\n    return props.theme.isDark\r\n      ? \"0 4px 12px rgba(0, 0, 0, 0.3), 0 2px 4px rgba(0, 0, 0, 0.2)\"\r\n      : \"0 4px 12px rgba(0, 0, 0, 0.08), 0 2px 4px rgba(0, 0, 0, 0.04)\";\r\n  }};\r\n\r\n  position: relative;\r\n  transition: all 0.2s ease;\r\n\r\n  &:hover {\r\n    transform: translateY(-1px);\r\n    box-shadow: ${(props) => {\r\n      if (props.isSystem) return \"none\";\r\n      if (props.isOwn)\r\n        return props.theme.isDark\r\n          ? \"0 6px 20px rgba(0, 123, 255, 0.4), 0 4px 8px rgba(0, 0, 0, 0.3)\"\r\n          : \"0 6px 20px rgba(0, 123, 255, 0.3), 0 4px 8px rgba(0, 0, 0, 0.15)\";\r\n      return props.theme.isDark\r\n        ? \"0 6px 20px rgba(0, 0, 0, 0.4), 0 4px 8px rgba(0, 0, 0, 0.3)\"\r\n        : \"0 6px 20px rgba(0, 0, 0, 0.12), 0 4px 8px rgba(0, 0, 0, 0.08)\";\r\n    }};\r\n  }\r\n\r\n  ${(props) =>\r\n    props.isSystem &&\r\n    `\r\n    margin: 8px auto;\r\n    max-width: 320px;\r\n    backdrop-filter: blur(10px);\r\n  `}\r\n\r\n  @media (max-width: 480px) {\r\n    font-size: 0.9rem;\r\n    padding: ${(props) => (props.isSystem ? \"8px 16px\" : \"12px 16px\")};\r\n  }\r\n`;\r\n\r\nconst TypingIndicator = styled.div`\r\n  position: absolute;\r\n  bottom: 100px; /* Position above input area */\r\n  left: 20px;\r\n  right: 20px;\r\n  padding: 10px 20px;\r\n  color: ${(props) => (props.theme.isDark ? \"#888\" : \"#666\")};\r\n  font-style: italic;\r\n  font-size: 0.9rem;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  animation: fadeIn 0.3s ease-in;\r\n  background: ${(props) =>\r\n    props.theme.isDark\r\n      ? \"rgba(45, 45, 45, 0.95)\"\r\n      : \"rgba(255, 255, 255, 0.95)\"};\r\n  border-radius: 20px;\r\n  backdrop-filter: blur(10px);\r\n  border: 1px solid ${(props) => (props.theme.isDark ? \"#444\" : \"#e0e0e0\")};\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\r\n  z-index: 10;\r\n\r\n  @keyframes fadeIn {\r\n    from {\r\n      opacity: 0;\r\n      transform: translateY(10px);\r\n    }\r\n    to {\r\n      opacity: 1;\r\n      transform: translateY(0);\r\n    }\r\n  }\r\n\r\n  @media (max-width: 768px) {\r\n    bottom: 90px;\r\n    left: 15px;\r\n    right: 15px;\r\n    padding: 8px 16px;\r\n    font-size: 0.85rem;\r\n  }\r\n\r\n  @media (max-width: 480px) {\r\n    bottom: 80px;\r\n    left: 10px;\r\n    right: 10px;\r\n    padding: 8px 16px;\r\n    font-size: 0.85rem;\r\n  }\r\n`;\r\n\r\nconst TypingDots = styled.div`\r\n  display: flex;\r\n  gap: 3px;\r\n\r\n  span {\r\n    width: 8px;\r\n    height: 8px;\r\n    background: ${(props) => (props.theme.isDark ? \"#007bff\" : \"#007bff\")};\r\n    border-radius: 50%;\r\n    animation: typing 1.4s infinite ease-in-out;\r\n\r\n    &:nth-child(1) {\r\n      animation-delay: 0s;\r\n    }\r\n    &:nth-child(2) {\r\n      animation-delay: 0.2s;\r\n    }\r\n    &:nth-child(3) {\r\n      animation-delay: 0.4s;\r\n    }\r\n  }\r\n\r\n  @keyframes typing {\r\n    0%,\r\n    60%,\r\n    100% {\r\n      transform: translateY(0);\r\n      opacity: 0.4;\r\n      background: ${(props) => (props.theme.isDark ? \"#666\" : \"#999\")};\r\n    }\r\n    30% {\r\n      transform: translateY(-8px);\r\n      opacity: 1;\r\n      background: ${(props) => (props.theme.isDark ? \"#007bff\" : \"#007bff\")};\r\n    }\r\n  }\r\n`;\r\n\r\nconst InputArea = styled.div`\r\n  background: ${(props) =>\r\n    props.theme.isDark\r\n      ? \"linear-gradient(135deg, rgba(45, 45, 45, 0.95) 0%, rgba(60, 60, 60, 0.95) 100%)\"\r\n      : \"linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 249, 250, 0.95) 100%)\"};\r\n  backdrop-filter: blur(20px);\r\n  padding: 25px;\r\n  border-top: 1px solid\r\n    ${(props) =>\r\n      props.theme.isDark\r\n        ? \"rgba(68, 68, 68, 0.5)\"\r\n        : \"rgba(224, 224, 224, 0.5)\"};\r\n  border-radius: 20px 20px 0 0;\r\n  box-shadow: ${(props) =>\r\n    props.theme.isDark\r\n      ? \"0 -8px 32px rgba(0, 0, 0, 0.3), 0 -2px 8px rgba(0, 0, 0, 0.2)\"\r\n      : \"0 -8px 32px rgba(0, 0, 0, 0.1), 0 -2px 8px rgba(0, 0, 0, 0.05)\"};\r\n  flex-shrink: 0;\r\n\r\n  @media (max-width: 768px) {\r\n    padding: 16px;\r\n    border-radius: 15px 15px 0 0;\r\n  }\r\n\r\n  @media (max-width: 480px) {\r\n    padding: 12px;\r\n    border-radius: 12px 12px 0 0;\r\n    min-height: auto;\r\n  }\r\n`;\r\n\r\nconst InputContainer = styled.div`\r\n  display: flex;\r\n  gap: 12px;\r\n  align-items: flex-end;\r\n  flex-wrap: nowrap;\r\n\r\n  @media (max-width: 768px) {\r\n    gap: 8px;\r\n  }\r\n\r\n  @media (max-width: 480px) {\r\n    gap: 6px;\r\n    flex-wrap: nowrap;\r\n    overflow-x: visible;\r\n  }\r\n`;\r\n\r\nconst Input = styled.input`\r\n  flex: 1;\r\n  min-width: 0;\r\n  padding: 16px 20px;\r\n  border: 2px solid\r\n    ${(props) =>\r\n      props.theme.isDark\r\n        ? \"rgba(85, 85, 85, 0.5)\"\r\n        : \"rgba(224, 224, 224, 0.5)\"};\r\n  border-radius: 25px;\r\n  font-size: 15px;\r\n  height: 50px;\r\n  background: ${(props) =>\r\n    props.theme.isDark\r\n      ? \"linear-gradient(135deg, rgba(61, 61, 61, 0.8) 0%, rgba(80, 80, 80, 0.8) 100%)\"\r\n      : \"linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(248, 249, 250, 0.9) 100%)\"};\r\n  backdrop-filter: blur(10px);\r\n  color: ${(props) => (props.theme.isDark ? \"#ffffff\" : \"#333333\")};\r\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\r\n  font-weight: 500;\r\n  box-shadow: ${(props) =>\r\n    props.theme.isDark\r\n      ? \"inset 0 2px 4px rgba(0, 0, 0, 0.2)\"\r\n      : \"inset 0 2px 4px rgba(0, 0, 0, 0.05)\"};\r\n\r\n  &:focus {\r\n    outline: none;\r\n    border-color: #007bff;\r\n    box-shadow: ${(props) =>\r\n      props.theme.isDark\r\n        ? \"0 0 0 4px rgba(0, 123, 255, 0.2), inset 0 2px 4px rgba(0, 0, 0, 0.2)\"\r\n        : \"0 0 0 4px rgba(0, 123, 255, 0.1), inset 0 2px 4px rgba(0, 0, 0, 0.05)\"};\r\n    transform: translateY(-1px);\r\n  }\r\n\r\n  &::placeholder {\r\n    color: ${(props) => (props.theme.isDark ? \"#aaa\" : \"#999\")};\r\n    font-weight: 400;\r\n  }\r\n\r\n  @media (max-width: 480px) {\r\n    padding: 12px 16px;\r\n    height: 44px;\r\n    font-size: 14px;\r\n    border-radius: 22px;\r\n  }\r\n`;\r\n\r\nconst SendButton = styled.button`\r\n  background: ${(props) =>\r\n    props.disabled\r\n      ? props.theme.isDark\r\n        ? \"#555\"\r\n        : \"#ccc\"\r\n      : \"linear-gradient(135deg, #007bff 0%, #0056b3 100%)\"};\r\n  color: white;\r\n  border: none;\r\n  padding: 12px;\r\n  border-radius: 50%;\r\n  cursor: ${(props) => (props.disabled ? \"not-allowed\" : \"pointer\")};\r\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 50px;\r\n  height: 50px;\r\n  font-size: 16px;\r\n  flex-shrink: 0;\r\n  box-shadow: ${(props) =>\r\n    props.disabled\r\n      ? \"none\"\r\n      : props.theme.isDark\r\n      ? \"0 4px 12px rgba(0, 123, 255, 0.4), 0 2px 4px rgba(0, 0, 0, 0.2)\"\r\n      : \"0 4px 12px rgba(0, 123, 255, 0.3), 0 2px 4px rgba(0, 0, 0, 0.1)\"};\r\n\r\n  &:hover:not(:disabled) {\r\n    transform: translateY(-3px) scale(1.05);\r\n    box-shadow: ${(props) =>\r\n      props.theme.isDark\r\n        ? \"0 8px 25px rgba(0, 123, 255, 0.5), 0 4px 8px rgba(0, 0, 0, 0.3)\"\r\n        : \"0 8px 25px rgba(0, 123, 255, 0.4), 0 4px 8px rgba(0, 0, 0, 0.15)\"};\r\n    background: linear-gradient(135deg, #0056b3 0%, #004085 100%);\r\n  }\r\n\r\n  &:active:not(:disabled) {\r\n    transform: translateY(-1px) scale(1.02);\r\n  }\r\n\r\n  &:disabled {\r\n    opacity: 0.6;\r\n  }\r\n\r\n  @media (max-width: 480px) {\r\n    width: 44px;\r\n    height: 44px;\r\n    padding: 10px;\r\n    font-size: 14px;\r\n  }\r\n`;\r\n\r\nconst EmptyState = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  color: ${(props) => (props.theme.isDark ? \"#ccc\" : \"#666\")};\r\n  text-align: center;\r\n  padding: 40px 20px;\r\n\r\n  h3 {\r\n    font-size: 1.5rem;\r\n    margin-bottom: 12px;\r\n    background: ${(props) =>\r\n      props.theme.isDark\r\n        ? \"linear-gradient(135deg, #ffffff 0%, #cccccc 100%)\"\r\n        : \"linear-gradient(135deg, #333333 0%, #666666 100%)\"};\r\n    -webkit-background-clip: text;\r\n    -webkit-text-fill-color: transparent;\r\n    background-clip: text;\r\n  }\r\n\r\n  p {\r\n    font-size: 1rem;\r\n    opacity: 0.8;\r\n    max-width: 300px;\r\n    line-height: 1.5;\r\n  }\r\n`;\r\n\r\nconst ReplyPreview = styled.div`\r\n  background: ${(props) =>\r\n    props.theme.isDark ? \"rgba(68, 68, 68, 0.8)\" : \"rgba(248, 249, 250, 0.9)\"};\r\n  backdrop-filter: blur(10px);\r\n  border-left: 4px solid #007bff;\r\n  padding: 12px 16px;\r\n  margin-bottom: 12px;\r\n  border-radius: 8px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  animation: slideDown 0.3s ease-out;\r\n\r\n  @keyframes slideDown {\r\n    from {\r\n      opacity: 0;\r\n      transform: translateY(-10px);\r\n    }\r\n    to {\r\n      opacity: 1;\r\n      transform: translateY(0);\r\n    }\r\n  }\r\n`;\r\n\r\nconst ReplyContent = styled.div`\r\n  flex: 1;\r\n\r\n  .reply-to {\r\n    font-size: 0.8rem;\r\n    color: #007bff;\r\n    font-weight: 600;\r\n    margin-bottom: 4px;\r\n  }\r\n\r\n  .reply-message {\r\n    font-size: 0.9rem;\r\n    color: ${(props) => (props.theme.isDark ? \"#ccc\" : \"#666\")};\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    white-space: nowrap;\r\n    max-width: 200px;\r\n  }\r\n`;\r\n\r\nconst ReplyCloseButton = styled.button`\r\n  background: transparent;\r\n  border: none;\r\n  color: ${(props) => (props.theme.isDark ? \"#ccc\" : \"#666\")};\r\n  cursor: pointer;\r\n  padding: 4px;\r\n  border-radius: 50%;\r\n  transition: all 0.2s ease;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 24px;\r\n  height: 24px;\r\n\r\n  &:hover {\r\n    background: ${(props) =>\r\n      props.theme.isDark ? \"rgba(255, 255, 255, 0.1)\" : \"rgba(0, 0, 0, 0.05)\"};\r\n    color: #dc3545;\r\n  }\r\n`;\r\n\r\nconst SwipeIndicator = styled.div`\r\n  position: absolute;\r\n  right: ${(props) => (props.isOwn ? \"auto\" : \"10px\")};\r\n  left: ${(props) => (props.isOwn ? \"10px\" : \"auto\")};\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  background: rgba(0, 123, 255, 0.8);\r\n  color: white;\r\n  border-radius: 50%;\r\n  width: 32px;\r\n  height: 32px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  opacity: ${(props) => (props.show ? 1 : 0)};\r\n  transition: opacity 0.2s ease;\r\n  z-index: 10;\r\n`;\r\n\r\nconst ReplyMessagePreview = styled.div`\r\n  background: ${(props) =>\r\n    props.theme.isDark ? \"rgba(68, 68, 68, 0.6)\" : \"rgba(248, 249, 250, 0.8)\"};\r\n  border-left: 3px solid #007bff;\r\n  padding: 8px 12px;\r\n  margin-bottom: 6px;\r\n  border-radius: 8px;\r\n  font-size: 0.85rem;\r\n  color: ${(props) => (props.theme.isDark ? \"#ccc\" : \"#666\")};\r\n  backdrop-filter: blur(5px);\r\n  border: 1px solid\r\n    ${(props) =>\r\n      props.theme.isDark ? \"rgba(0, 123, 255, 0.2)\" : \"rgba(0, 123, 255, 0.1)\"};\r\n\r\n  .reply-username {\r\n    color: #007bff;\r\n    font-weight: 600;\r\n    font-size: 0.8rem;\r\n    margin-bottom: 2px;\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 4px;\r\n\r\n    &::before {\r\n      content: \"â†³\";\r\n      font-size: 0.9rem;\r\n      opacity: 0.7;\r\n    }\r\n  }\r\n\r\n  .reply-content {\r\n    opacity: 0.8;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    white-space: nowrap;\r\n    max-width: 100%;\r\n    font-style: italic;\r\n  }\r\n`;\r\n\r\nconst MessageReactions = styled.div`\r\n  display: flex;\r\n  gap: 6px;\r\n  margin-top: 6px;\r\n  align-items: center;\r\n  justify-content: ${(props) => (props.isOwn ? \"flex-end\" : \"flex-start\")};\r\n  padding: 0 4px;\r\n\r\n  /* Position reactions slightly overlapping the message bubble */\r\n  margin-top: -8px;\r\n  position: relative;\r\n  z-index: 2;\r\n`;\r\n\r\nconst ReactionButton = styled.button`\r\n  background: transparent;\r\n  border: none;\r\n  cursor: pointer;\r\n  padding: 6px;\r\n  border-radius: 50%;\r\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 32px;\r\n  height: 32px;\r\n  position: relative;\r\n\r\n  &:hover {\r\n    background: rgba(231, 76, 60, 0.1);\r\n    transform: scale(1.1);\r\n  }\r\n\r\n  &:active {\r\n    transform: scale(0.9);\r\n  }\r\n\r\n  &::before {\r\n    content: \"\";\r\n    position: absolute;\r\n    inset: -2px;\r\n    border-radius: 50%;\r\n    background: linear-gradient(45deg, #ff6b6b, #ee5a24);\r\n    opacity: 0;\r\n    transition: opacity 0.3s ease;\r\n    z-index: -1;\r\n  }\r\n\r\n  &:hover::before {\r\n    opacity: 0.1;\r\n  }\r\n`;\r\n\r\nconst InputActions = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n  flex-shrink: 0;\r\n\r\n  @media (max-width: 480px) {\r\n    gap: 2px;\r\n  }\r\n`;\r\n\r\nconst ActionIcon = styled.button`\r\n  background: transparent;\r\n  border: none;\r\n  color: ${(props) => (props.theme.isDark ? \"#ccc\" : \"#666\")};\r\n  cursor: pointer;\r\n  padding: 6px;\r\n  border-radius: 50%;\r\n  transition: all 0.2s ease;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 32px;\r\n  height: 32px;\r\n  flex-shrink: 0;\r\n\r\n  &:hover {\r\n    background: ${(props) =>\r\n      props.theme.isDark ? \"rgba(255, 255, 255, 0.1)\" : \"rgba(0, 0, 0, 0.05)\"};\r\n    color: #007bff;\r\n    transform: scale(1.1);\r\n  }\r\n\r\n  @media (max-width: 480px) {\r\n    width: 28px;\r\n    height: 28px;\r\n    padding: 4px;\r\n  }\r\n`;\r\n\r\nconst ContextMenuOverlay = styled.div`\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(0, 0, 0, 0.3);\r\n  backdrop-filter: blur(4px);\r\n  z-index: 1000;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  animation: fadeIn 0.2s ease-out;\r\n\r\n  @keyframes fadeIn {\r\n    from {\r\n      opacity: 0;\r\n    }\r\n    to {\r\n      opacity: 1;\r\n    }\r\n  }\r\n`;\r\n\r\nconst ContextMenuContainer = styled.div`\r\n  background: ${(props) =>\r\n    props.theme.isDark\r\n      ? \"linear-gradient(135deg, #2d2d2d 0%, #404040 100%)\"\r\n      : \"linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%)\"};\r\n  border-radius: 16px;\r\n  padding: 8px;\r\n  box-shadow: ${(props) =>\r\n    props.theme.isDark\r\n      ? \"0 20px 60px rgba(0, 0, 0, 0.5), 0 8px 24px rgba(0, 0, 0, 0.3)\"\r\n      : \"0 20px 60px rgba(0, 0, 0, 0.15), 0 8px 24px rgba(0, 0, 0, 0.1)\"};\r\n  border: 1px solid\r\n    ${(props) =>\r\n      props.theme.isDark ? \"rgba(255, 255, 255, 0.1)\" : \"rgba(0, 0, 0, 0.05)\"};\r\n  backdrop-filter: blur(20px);\r\n  max-width: 90vw;\r\n  max-height: 80vh;\r\n  overflow-y: auto;\r\n  animation: slideUp 0.3s cubic-bezier(0.4, 0, 0.2, 1);\r\n\r\n  @keyframes slideUp {\r\n    from {\r\n      opacity: 0;\r\n      transform: translateY(20px) scale(0.95);\r\n    }\r\n    to {\r\n      opacity: 1;\r\n      transform: translateY(0) scale(1);\r\n    }\r\n  }\r\n\r\n  &::-webkit-scrollbar {\r\n    width: 6px;\r\n  }\r\n\r\n  &::-webkit-scrollbar-track {\r\n    background: transparent;\r\n  }\r\n\r\n  &::-webkit-scrollbar-thumb {\r\n    background: ${(props) => (props.theme.isDark ? \"#555\" : \"#ccc\")};\r\n    border-radius: 3px;\r\n  }\r\n`;\r\n\r\nconst ContextMenuGrid = styled.div`\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));\r\n  gap: 8px;\r\n  max-width: 480px;\r\n\r\n  @media (max-width: 768px) {\r\n    grid-template-columns: repeat(3, 1fr);\r\n    max-width: 360px;\r\n  }\r\n\r\n  @media (max-width: 480px) {\r\n    grid-template-columns: repeat(2, 1fr);\r\n    max-width: 280px;\r\n  }\r\n`;\r\n\r\nconst ContextMenuItem = styled.button`\r\n  background: ${(props) =>\r\n    props.theme.isDark ? \"rgba(68, 68, 68, 0.6)\" : \"rgba(248, 249, 250, 0.8)\"};\r\n  border: 1px solid\r\n    ${(props) =>\r\n      props.theme.isDark\r\n        ? \"rgba(85, 85, 85, 0.4)\"\r\n        : \"rgba(222, 226, 230, 0.4)\"};\r\n  color: ${(props) => {\r\n    if (props.danger) return \"#dc3545\";\r\n    if (props.primary) return \"#007bff\";\r\n    return props.theme.isDark ? \"#ffffff\" : \"#333333\";\r\n  }};\r\n  padding: 12px 8px;\r\n  border-radius: 12px;\r\n  cursor: pointer;\r\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 6px;\r\n  font-size: 11px;\r\n  font-weight: 500;\r\n  text-align: center;\r\n  backdrop-filter: blur(10px);\r\n  min-height: 70px;\r\n  justify-content: center;\r\n\r\n  &:hover {\r\n    background: ${(props) => {\r\n      if (props.danger) return \"rgba(220, 53, 69, 0.1)\";\r\n      if (props.primary) return \"rgba(0, 123, 255, 0.1)\";\r\n      return props.theme.isDark\r\n        ? \"rgba(85, 85, 85, 0.8)\"\r\n        : \"rgba(233, 236, 239, 0.9)\";\r\n    }};\r\n    transform: translateY(-2px) scale(1.02);\r\n    box-shadow: ${(props) =>\r\n      props.theme.isDark\r\n        ? \"0 8px 20px rgba(0, 0, 0, 0.4)\"\r\n        : \"0 8px 20px rgba(0, 0, 0, 0.15)\"};\r\n    border-color: ${(props) => {\r\n      if (props.danger) return \"rgba(220, 53, 69, 0.3)\";\r\n      if (props.primary) return \"rgba(0, 123, 255, 0.3)\";\r\n      return props.theme.isDark\r\n        ? \"rgba(85, 85, 85, 0.6)\"\r\n        : \"rgba(222, 226, 230, 0.6)\";\r\n    }};\r\n  }\r\n\r\n  &:active {\r\n    transform: translateY(0) scale(0.98);\r\n  }\r\n\r\n  svg {\r\n    font-size: 16px;\r\n    opacity: 0.8;\r\n  }\r\n\r\n  span {\r\n    line-height: 1.2;\r\n    max-width: 100%;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    white-space: nowrap;\r\n  }\r\n`;\r\n\r\nconst MessagePreview = styled.div`\r\n  background: ${(props) =>\r\n    props.theme.isDark ? \"rgba(45, 45, 45, 0.9)\" : \"rgba(255, 255, 255, 0.95)\"};\r\n  border-radius: 12px;\r\n  padding: 16px;\r\n  margin-bottom: 16px;\r\n  border: 1px solid\r\n    ${(props) =>\r\n      props.theme.isDark\r\n        ? \"rgba(85, 85, 85, 0.5)\"\r\n        : \"rgba(222, 226, 230, 0.5)\"};\r\n  backdrop-filter: blur(10px);\r\n\r\n  .preview-header {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8px;\r\n    margin-bottom: 8px;\r\n\r\n    .avatar {\r\n      width: 24px;\r\n      height: 24px;\r\n      border-radius: 50%;\r\n      object-fit: cover;\r\n    }\r\n\r\n    .username {\r\n      font-weight: 600;\r\n      font-size: 0.9rem;\r\n      color: ${(props) => (props.theme.isDark ? \"#ccc\" : \"#666\")};\r\n    }\r\n\r\n    .timestamp {\r\n      font-size: 0.8rem;\r\n      color: ${(props) => (props.theme.isDark ? \"#888\" : \"#999\")};\r\n      margin-left: auto;\r\n    }\r\n  }\r\n\r\n  .preview-content {\r\n    color: ${(props) => (props.theme.isDark ? \"#ffffff\" : \"#333333\")};\r\n    font-size: 0.9rem;\r\n    line-height: 1.4;\r\n    max-height: 60px;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    display: -webkit-box;\r\n    -webkit-line-clamp: 3;\r\n    -webkit-box-orient: vertical;\r\n  }\r\n`;\r\n\r\nconst ConversationBar = styled.div`\r\n  position: sticky;\r\n  top: 0;\r\n  z-index: 100;\r\n  background: ${(props) =>\r\n    props.theme.isDark\r\n      ? \"linear-gradient(135deg, rgba(45, 45, 45, 0.95) 0%, rgba(60, 60, 60, 0.95) 100%)\"\r\n      : \"linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 249, 250, 0.95) 100%)\"};\r\n  backdrop-filter: blur(20px);\r\n  border-bottom: 1px solid\r\n    ${(props) =>\r\n      props.theme.isDark\r\n        ? \"rgba(85, 85, 85, 0.3)\"\r\n        : \"rgba(222, 226, 230, 0.3)\"};\r\n  padding: 12px 20px;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  box-shadow: ${(props) =>\r\n    props.theme.isDark\r\n      ? \"0 2px 20px rgba(0, 0, 0, 0.3)\"\r\n      : \"0 2px 20px rgba(0, 0, 0, 0.1)\"};\r\n\r\n  .conversation-info {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 10px;\r\n    flex: 1;\r\n\r\n    .avatar {\r\n      width: 36px;\r\n      height: 36px;\r\n      border-radius: 50%;\r\n      object-fit: cover;\r\n      border: 2px solid\r\n        ${(props) =>\r\n          props.theme.isDark\r\n            ? \"rgba(255, 255, 255, 0.1)\"\r\n            : \"rgba(0, 0, 0, 0.1)\"};\r\n    }\r\n\r\n    .details {\r\n      display: flex;\r\n      flex-direction: column;\r\n\r\n      .name {\r\n        font-weight: 600;\r\n        font-size: 1rem;\r\n        color: ${(props) => (props.theme.isDark ? \"#ffffff\" : \"#333333\")};\r\n        margin: 0;\r\n      }\r\n\r\n      .status {\r\n        font-size: 0.8rem;\r\n        color: ${(props) => (props.theme.isDark ? \"#aaa\" : \"#666\")};\r\n        margin: 0;\r\n        display: flex;\r\n        align-items: center;\r\n        gap: 4px;\r\n\r\n        .online-dot {\r\n          width: 6px;\r\n          height: 6px;\r\n          border-radius: 50%;\r\n          background: #4caf50;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .conversation-actions {\r\n    display: flex;\r\n    gap: 8px;\r\n  }\r\n`;\r\n\r\nconst ChatRoom = () => {\r\n  const { roomId } = useParams();\r\n  const navigate = useNavigate();\r\n  const {\r\n    socket,\r\n    leaveRoom,\r\n    joinRoom,\r\n    isConnected,\r\n    sendMessage,\r\n    startTyping,\r\n    stopTyping,\r\n    user,\r\n  } = useSocket();\r\n  const { messages, typingUsers, roomUsers } = useChat();\r\n  const { theme, toggleTheme } = useTheme();\r\n  const [newMessage, setNewMessage] = useState(\"\");\r\n  const [isTyping, setIsTyping] = useState(false);\r\n  const [editingMessageId, setEditingMessageId] = useState(null);\r\n  const [editingContent, setEditingContent] = useState(\"\");\r\n  const [replyingTo, setReplyingTo] = useState(null);\r\n\r\n  const [contextMenu, setContextMenu] = useState(null);\r\n  const [longPressTimer, setLongPressTimer] = useState(null);\r\n  const messagesEndRef = useRef(null);\r\n  const typingTimeoutRef = useRef(null);\r\n  const touchStartRef = useRef(null);\r\n  const touchEndRef = useRef(null);\r\n  const doubleTapTimeoutRef = useRef(null);\r\n\r\n  console.log(\"ðŸ  ChatRoom: Component rendered with:\", {\r\n    roomId,\r\n    isConnected,\r\n    user: user?.username,\r\n    messagesCount: messages.length,\r\n    typingUsersCount: typingUsers.length,\r\n    roomUsersCount: roomUsers.length,\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (!isConnected || !user) {\r\n      navigate(\"/login\");\r\n      return;\r\n    }\r\n\r\n    // Join the room when component mounts\r\n    const joinCurrentRoom = async () => {\r\n      try {\r\n        console.log(\"ðŸ  ChatRoom: Attempting to join room:\", roomId);\r\n        await joinRoom(roomId);\r\n        console.log(\"âœ… ChatRoom: Successfully joined room:\", roomId);\r\n      } catch (error) {\r\n        console.error(\"âŒ ChatRoom: Failed to join room:\", error);\r\n        navigate(\"/rooms\");\r\n      }\r\n    };\r\n\r\n    joinCurrentRoom();\r\n  }, [isConnected, user, navigate, joinRoom, roomId]);\r\n\r\n  useEffect(() => {\r\n    console.log(\"ðŸ“ ChatRoom: Messages updated, count:\", messages.length);\r\n    console.log(\"ðŸ“ ChatRoom: Current messages:\", messages);\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  useEffect(() => {\r\n    console.log(\"âŒ¨ï¸ ChatRoom: Typing users updated:\", typingUsers);\r\n  }, [typingUsers]);\r\n\r\n  useEffect(() => {\r\n    console.log(\"ðŸ‘¥ ChatRoom: Room users updated:\", roomUsers);\r\n  }, [roomUsers]);\r\n\r\n  useEffect(() => {\r\n    if (isTyping) {\r\n      console.log(\"âŒ¨ï¸ ChatRoom: Starting typing indicator\");\r\n      startTyping();\r\n    } else {\r\n      console.log(\"âŒ¨ï¸ ChatRoom: Stopping typing indicator\");\r\n      stopTyping();\r\n    }\r\n  }, [isTyping, startTyping, stopTyping]);\r\n\r\n  // Cleanup long press timer on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      if (longPressTimer) {\r\n        clearTimeout(longPressTimer);\r\n      }\r\n      if (typingTimeoutRef.current) {\r\n        clearTimeout(typingTimeoutRef.current);\r\n      }\r\n    };\r\n  }, [longPressTimer]);\r\n\r\n  // Handle keyboard events for context menu\r\n  useEffect(() => {\r\n    const handleKeyDown = (e) => {\r\n      if (e.key === \"Escape\" && contextMenu) {\r\n        closeContextMenu();\r\n      }\r\n    };\r\n\r\n    if (contextMenu) {\r\n      document.addEventListener(\"keydown\", handleKeyDown);\r\n      return () => document.removeEventListener(\"keydown\", handleKeyDown);\r\n    }\r\n  }, [contextMenu]);\r\n\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  };\r\n\r\n  const handleSendMessage = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!newMessage.trim()) return;\r\n\r\n    console.log(\"ðŸ“¨ ChatRoom: Attempting to send message:\", newMessage.trim());\r\n\r\n    try {\r\n      if (replyingTo) {\r\n        // Send message with reply data\r\n        if (socket && isConnected) {\r\n          socket.emit(\"chat-message\", {\r\n            content: newMessage.trim(),\r\n            replyTo: replyingTo.id,\r\n          });\r\n        }\r\n      } else {\r\n        // Send regular message\r\n        sendMessage(newMessage.trim());\r\n      }\r\n\r\n      setNewMessage(\"\");\r\n      setReplyingTo(null);\r\n      setIsTyping(false);\r\n      console.log(\"âœ… ChatRoom: Message sent successfully\");\r\n    } catch (err) {\r\n      console.error(\"âŒ ChatRoom: Failed to send message:\", err);\r\n    }\r\n  };\r\n\r\n  const handleInputChange = (e) => {\r\n    setNewMessage(e.target.value);\r\n\r\n    // Clear existing timeout\r\n    if (typingTimeoutRef.current) {\r\n      clearTimeout(typingTimeoutRef.current);\r\n    }\r\n\r\n    // Start typing if not already\r\n    if (!isTyping && e.target.value.trim()) {\r\n      setIsTyping(true);\r\n    }\r\n\r\n    // Set new timeout to stop typing\r\n    if (e.target.value.trim()) {\r\n      typingTimeoutRef.current = setTimeout(() => {\r\n        setIsTyping(false);\r\n      }, 2000); // Stop typing after 2 seconds of inactivity\r\n    } else {\r\n      setIsTyping(false);\r\n    }\r\n  };\r\n\r\n  const handleInputKeyDown = (e) => {\r\n    if (e.key === \"Enter\") {\r\n      e.preventDefault();\r\n      handleSendMessage(e);\r\n    }\r\n  };\r\n\r\n  const handleLeaveRoom = () => {\r\n    console.log(\"ðŸšª ChatRoom: User clicked leave room\");\r\n    leaveRoom();\r\n    navigate(\"/rooms\");\r\n  };\r\n\r\n  const handleEditMessage = (messageId, currentContent) => {\r\n    setEditingMessageId(messageId);\r\n    setEditingContent(currentContent);\r\n  };\r\n\r\n  const handleLongPress = (message, event) => {\r\n    event.preventDefault();\r\n    setContextMenu({\r\n      message,\r\n      x: event.clientX || (event.touches && event.touches[0].clientX) || 0,\r\n      y: event.clientY || (event.touches && event.touches[0].clientY) || 0,\r\n    });\r\n  };\r\n\r\n  const handleMouseDown = (message, event) => {\r\n    const timer = setTimeout(() => {\r\n      handleLongPress(message, event);\r\n    }, 500); // 500ms for long press\r\n    setLongPressTimer(timer);\r\n  };\r\n\r\n  const handleMouseUp = () => {\r\n    if (longPressTimer) {\r\n      clearTimeout(longPressTimer);\r\n      setLongPressTimer(null);\r\n    }\r\n  };\r\n\r\n  const closeContextMenu = () => {\r\n    setContextMenu(null);\r\n  };\r\n\r\n  const handleContextAction = (action, message) => {\r\n    console.log(`Context action: ${action}`, message);\r\n\r\n    switch (action) {\r\n      case \"reply\":\r\n        setReplyingTo(message);\r\n        break;\r\n      case \"copy\":\r\n        navigator.clipboard.writeText(message.content);\r\n        break;\r\n      case \"edit\":\r\n        if (message.userId === user?.id) {\r\n          handleEditMessage(message.id, message.content);\r\n        }\r\n        break;\r\n      case \"delete\":\r\n        if (message.userId === user?.id) {\r\n          handleDeleteMessage(message.id);\r\n        }\r\n        break;\r\n      case \"forward\":\r\n        // Implement forward functionality\r\n        console.log(\"Forward message:\", message.content);\r\n        break;\r\n      case \"star\":\r\n        // Add heart reaction like double tap\r\n        if (socket && isConnected) {\r\n          socket.emit(\"message-reaction\", {\r\n            messageId: message._id,\r\n            reaction: \"heart\",\r\n            action: \"add\",\r\n          });\r\n        }\r\n        break;\r\n      case \"pin\":\r\n        // Implement pin functionality\r\n        console.log(\"Pin message:\", message.id);\r\n        break;\r\n      case \"info\":\r\n        // Show message info\r\n        console.log(\"Message info:\", message);\r\n        break;\r\n      case \"translate\":\r\n        // Implement translation\r\n        console.log(\"Translate message:\", message.content);\r\n        break;\r\n      case \"quote\":\r\n        // Quote message\r\n        setNewMessage(`\"${message.content}\" - ${message.username}\\n\\n`);\r\n        break;\r\n      case \"save\":\r\n        // Save message locally\r\n        const savedMessages = JSON.parse(\r\n          localStorage.getItem(\"savedMessages\") || \"[]\"\r\n        );\r\n        savedMessages.push(message);\r\n        localStorage.setItem(\"savedMessages\", JSON.stringify(savedMessages));\r\n        break;\r\n      case \"share\":\r\n        if (navigator.share) {\r\n          navigator.share({\r\n            title: \"Shared Message\",\r\n            text: `${message.username}: ${message.content}`,\r\n          });\r\n        }\r\n        break;\r\n      case \"report\":\r\n        // Implement report functionality\r\n        console.log(\"Report message:\", message.id);\r\n        break;\r\n      default:\r\n        console.log(`Action ${action} not implemented yet`);\r\n    }\r\n\r\n    closeContextMenu();\r\n  };\r\n\r\n  const contextMenuItems = [\r\n    { id: \"reply\", label: \"Reply\", icon: FaReply, primary: true },\r\n    { id: \"copy\", label: \"Copy\", icon: FaCopy },\r\n    { id: \"forward\", label: \"Forward\", icon: FaShareAlt },\r\n    { id: \"star\", label: \"Star\", icon: FaStar },\r\n    { id: \"pin\", label: \"Pin\", icon: FaThumbtack },\r\n    { id: \"info\", label: \"Info\", icon: FaInfoCircle },\r\n    { id: \"edit\", label: \"Edit\", icon: FaEdit },\r\n    { id: \"delete\", label: \"Delete\", icon: FaTrash, danger: true },\r\n    { id: \"quote\", label: \"Quote\", icon: FaQuoteLeft },\r\n    { id: \"translate\", label: \"Translate\", icon: FaLanguage },\r\n    { id: \"save\", label: \"Save\", icon: FaSave },\r\n    { id: \"share\", label: \"Share\", icon: FaShare },\r\n    { id: \"report\", label: \"Report\", icon: FaFlag, danger: true },\r\n  ];\r\n\r\n  const handleSaveEdit = () => {\r\n    if (!editingContent.trim()) return;\r\n\r\n    // Emit edit message event\r\n    if (socket && isConnected) {\r\n      socket.emit(\"edit-message\", {\r\n        messageId: editingMessageId,\r\n        newContent: editingContent.trim(),\r\n      });\r\n    }\r\n\r\n    setEditingMessageId(null);\r\n    setEditingContent(\"\");\r\n  };\r\n\r\n  const handleCancelEdit = () => {\r\n    setEditingMessageId(null);\r\n    setEditingContent(\"\");\r\n  };\r\n\r\n  const handleDeleteMessage = (messageId) => {\r\n    if (window.confirm(\"Are you sure you want to delete this message?\")) {\r\n      // Emit delete message event\r\n      if (socket && isConnected) {\r\n        socket.emit(\"delete-message\", { messageId });\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleClearAllMessages = () => {\r\n    if (\r\n      window.confirm(\r\n        \"Are you sure you want to clear all messages in this room? This action cannot be undone.\"\r\n      )\r\n    ) {\r\n      // Emit clear all messages event\r\n      if (socket && isConnected) {\r\n        socket.emit(\"clear-all-messages\", { roomId });\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleReplyToMessage = (message) => {\r\n    setReplyingTo({\r\n      id: message._id,\r\n      username: message.senderId?.username || \"Unknown\",\r\n      content: message.content,\r\n    });\r\n  };\r\n\r\n  const handleCancelReply = () => {\r\n    setReplyingTo(null);\r\n  };\r\n\r\n  const handleDoubleTap = (message) => {\r\n    if (message.messageType === \"system\") return;\r\n\r\n    // Emit reaction to server - the server will broadcast the update\r\n    if (socket && isConnected) {\r\n      socket.emit(\"message-reaction\", {\r\n        messageId: message._id,\r\n        reaction: \"heart\",\r\n        action: \"add\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleTouchStart = (e, message) => {\r\n    if (message.messageType === \"system\") return;\r\n\r\n    touchStartRef.current = {\r\n      x: e.touches[0].clientX,\r\n      y: e.touches[0].clientY,\r\n      time: Date.now(),\r\n      messageId: message._id,\r\n    };\r\n\r\n    // Start long press timer\r\n    const timer = setTimeout(() => {\r\n      handleLongPress(message, e);\r\n    }, 500);\r\n    setLongPressTimer(timer);\r\n  };\r\n\r\n  const handleTouchMove = (e, message) => {\r\n    if (!touchStartRef.current || message.messageType === \"system\") return;\r\n\r\n    const currentX = e.touches[0].clientX;\r\n    const deltaX = currentX - touchStartRef.current.x;\r\n\r\n    // Only allow swipe in the correct direction\r\n    const isOwnMessage =\r\n      message.senderId &&\r\n      user &&\r\n      (message.senderId._id === user.userId ||\r\n        message.senderId === user.userId ||\r\n        message.senderId.toString() === user.userId.toString());\r\n\r\n    const maxSwipe = 60;\r\n    const swipeThreshold = 30;\r\n\r\n    if ((isOwnMessage && deltaX < 0) || (!isOwnMessage && deltaX > 0)) {\r\n      const swipeOffset =\r\n        Math.min(Math.abs(deltaX), maxSwipe) * (deltaX < 0 ? -1 : 1);\r\n\r\n      // Update the message transform\r\n      const messageElement = e.currentTarget;\r\n      messageElement.style.transform = `translateX(${swipeOffset}px)`;\r\n\r\n      // Show/hide swipe indicator\r\n      const indicator = messageElement.querySelector(\".swipe-indicator\");\r\n      if (indicator) {\r\n        indicator.style.opacity =\r\n          Math.abs(swipeOffset) > swipeThreshold ? \"1\" : \"0\";\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleTouchEnd = (e, message) => {\r\n    // Clear long press timer\r\n    if (longPressTimer) {\r\n      clearTimeout(longPressTimer);\r\n      setLongPressTimer(null);\r\n    }\r\n\r\n    if (!touchStartRef.current || message.messageType === \"system\") return;\r\n\r\n    const touchEnd = {\r\n      x: e.changedTouches[0].clientX,\r\n      y: e.changedTouches[0].clientY,\r\n      time: Date.now(),\r\n    };\r\n\r\n    const deltaX = touchEnd.x - touchStartRef.current.x;\r\n    const deltaY = touchEnd.y - touchStartRef.current.y;\r\n    const deltaTime = touchEnd.time - touchStartRef.current.time;\r\n\r\n    // Reset transform\r\n    const messageElement = e.currentTarget;\r\n    messageElement.style.transform = \"translateX(0px)\";\r\n\r\n    // Hide swipe indicator\r\n    const indicator = messageElement.querySelector(\".swipe-indicator\");\r\n    if (indicator) {\r\n      indicator.style.opacity = \"0\";\r\n    }\r\n\r\n    // Check for swipe gesture (horizontal swipe > 30px and < 300ms)\r\n    if (Math.abs(deltaX) > 30 && Math.abs(deltaY) < 50 && deltaTime < 300) {\r\n      handleReplyToMessage(message);\r\n    }\r\n    // Check for double tap (< 300ms and < 10px movement)\r\n    else if (\r\n      deltaTime < 300 &&\r\n      Math.abs(deltaX) < 10 &&\r\n      Math.abs(deltaY) < 10\r\n    ) {\r\n      if (doubleTapTimeoutRef.current) {\r\n        // This is a double tap\r\n        clearTimeout(doubleTapTimeoutRef.current);\r\n        doubleTapTimeoutRef.current = null;\r\n        handleDoubleTap(message);\r\n      } else {\r\n        // This might be the first tap of a double tap\r\n        doubleTapTimeoutRef.current = setTimeout(() => {\r\n          doubleTapTimeoutRef.current = null;\r\n        }, 300);\r\n      }\r\n    }\r\n\r\n    touchStartRef.current = null;\r\n  };\r\n\r\n  if (!isConnected || !user) {\r\n    return (\r\n      <Container theme={theme}>\r\n        <EmptyState theme={theme}>\r\n          <h3>Connecting to server...</h3>\r\n          <p>Please wait while we establish a connection.</p>\r\n        </EmptyState>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container theme={theme}>\r\n      <Header theme={theme}>\r\n        <HeaderLeft>\r\n          <BackButton onClick={handleLeaveRoom} theme={theme}>\r\n            <FaArrowLeft />\r\n            Back\r\n          </BackButton>\r\n          <RoomInfo>\r\n            <RoomTitle>Room {roomId}</RoomTitle>\r\n            <UserCount theme={theme}>\r\n              <FaUsers />\r\n              {roomUsers.length}/2\r\n            </UserCount>\r\n          </RoomInfo>\r\n        </HeaderLeft>\r\n        <HeaderRight>\r\n          <ActionButton\r\n            onClick={handleClearAllMessages}\r\n            theme={theme}\r\n            className=\"danger\"\r\n            title=\"Clear all messages\"\r\n          >\r\n            <FaBroom />\r\n          </ActionButton>\r\n          <ActionButton\r\n            onClick={toggleTheme}\r\n            theme={theme}\r\n            title=\"Toggle theme\"\r\n          >\r\n            {theme.isDark ? <FaSun /> : <FaMoon />}\r\n          </ActionButton>\r\n        </HeaderRight>\r\n      </Header>\r\n\r\n      {/* Sticky Conversation Bar */}\r\n      <ConversationBar theme={theme}>\r\n        <div className=\"conversation-info\">\r\n          {(() => {\r\n            const otherUser = roomUsers.find((u) => u.userId !== user?.userId);\r\n\r\n            if (roomUsers.length === 0) {\r\n              // Loading state\r\n              return (\r\n                <>\r\n                  <img\r\n                    className=\"avatar\"\r\n                    src={getAvatarImage(\"default\")}\r\n                    alt=\"Room avatar\"\r\n                  />\r\n                  <div className=\"details\">\r\n                    <p className=\"name\">Connecting...</p>\r\n                    <p className=\"status\">Loading room...</p>\r\n                  </div>\r\n                </>\r\n              );\r\n            } else if (roomUsers.length === 1) {\r\n              // Only you in the room\r\n              return (\r\n                <>\r\n                  <img\r\n                    className=\"avatar\"\r\n                    src={getAvatarImage(\"default\")}\r\n                    alt=\"Waiting\"\r\n                  />\r\n                  <div className=\"details\">\r\n                    <p className=\"name\">Waiting for someone...</p>\r\n                    <p className=\"status\">\r\n                      Share room {roomId} to invite others\r\n                    </p>\r\n                  </div>\r\n                </>\r\n              );\r\n            } else if (roomUsers.length === 2 && otherUser) {\r\n              // 1-on-1 conversation\r\n              return (\r\n                <>\r\n                  <img\r\n                    className=\"avatar\"\r\n                    src={getAvatarImage(otherUser.avatar || \"default\")}\r\n                    alt={`${otherUser.username}'s avatar`}\r\n                  />\r\n                  <div className=\"details\">\r\n                    <p className=\"name\">{otherUser.username}</p>\r\n                    <p className=\"status\">\r\n                      <span className=\"online-dot\"></span>\r\n                      Online\r\n                    </p>\r\n                  </div>\r\n                </>\r\n              );\r\n            } else {\r\n              // Group conversation\r\n              return (\r\n                <>\r\n                  <img\r\n                    className=\"avatar\"\r\n                    src={getAvatarImage(\"group\")}\r\n                    alt=\"Group chat\"\r\n                  />\r\n                  <div className=\"details\">\r\n                    <p className=\"name\">{roomUsers.length} participants</p>\r\n                    <p className=\"status\">\r\n                      <span className=\"online-dot\"></span>\r\n                      {roomUsers.length} online\r\n                    </p>\r\n                  </div>\r\n                </>\r\n              );\r\n            }\r\n          })()}\r\n        </div>\r\n\r\n        <div className=\"conversation-actions\">\r\n          <ActionIcon theme={theme} title=\"Room Info\">\r\n            <FaInfoCircle />\r\n          </ActionIcon>\r\n        </div>\r\n      </ConversationBar>\r\n\r\n      <ChatArea>\r\n        <MessagesContainer theme={theme}>\r\n          {messages.length === 0 ? (\r\n            <EmptyState theme={theme}>\r\n              <h3>No messages yet</h3>\r\n              <p>Start the conversation by sending a message!</p>\r\n            </EmptyState>\r\n          ) : (\r\n            messages.map((message, index) => {\r\n              const isOwnMessage =\r\n                message.senderId &&\r\n                user &&\r\n                (message.senderId._id === user.userId ||\r\n                  message.senderId === user.userId ||\r\n                  message.senderId.toString() === user.userId.toString());\r\n\r\n              // Debug: Log message reactions\r\n              if (message.reactions) {\r\n                console.log(\r\n                  \"ðŸ’– Message reactions:\",\r\n                  message._id,\r\n                  message.reactions\r\n                );\r\n              }\r\n\r\n              return (\r\n                <MessageWrapper\r\n                  key={message._id || index}\r\n                  className=\"message-wrapper\"\r\n                  isOwn={isOwnMessage}\r\n                >\r\n                  <Message\r\n                    isOwn={isOwnMessage}\r\n                    isSystem={message.messageType === \"system\"}\r\n                    onMouseDown={(e) => handleMouseDown(message, e)}\r\n                    onMouseUp={handleMouseUp}\r\n                    onMouseLeave={handleMouseUp}\r\n                    onTouchStart={(e) => handleTouchStart(e, message)}\r\n                    onTouchEnd={(e) => handleTouchEnd(e, message)}\r\n                    onTouchCancel={(e) => handleTouchEnd(e, message)}\r\n                    onContextMenu={(e) => {\r\n                      e.preventDefault();\r\n                      handleLongPress(message, e);\r\n                    }}\r\n                  >\r\n                    {message.messageType !== \"system\" && (\r\n                      <>\r\n                        <SwipeIndicator\r\n                          className=\"swipe-indicator\"\r\n                          isOwn={isOwnMessage}\r\n                          show={false}\r\n                        >\r\n                          <FaReply />\r\n                        </SwipeIndicator>\r\n                        <Avatar\r\n                          src={getAvatarImage(message.senderId?.avatar)}\r\n                          alt={`${message.senderId?.username || \"User\"} avatar`}\r\n                          theme={theme}\r\n                        />\r\n                      </>\r\n                    )}\r\n\r\n                    <MessageBubbleContainer isOwn={isOwnMessage}>\r\n                      {message.messageType !== \"system\" && (\r\n                        <MessageHeader isOwn={isOwnMessage}>\r\n                          <Username theme={theme}>\r\n                            {message.senderId?.username || \"Unknown\"}\r\n                          </Username>\r\n                          <Timestamp theme={theme}>\r\n                            {new Date(\r\n                              message.timestamp || message.createdAt\r\n                            ).toLocaleTimeString(\"en-US\", {\r\n                              hour: \"2-digit\",\r\n                              minute: \"2-digit\",\r\n                              hour12: true,\r\n                            })}\r\n                            {message.isEdited && (\r\n                              <span\r\n                                style={{\r\n                                  marginLeft: \"5px\",\r\n                                  fontSize: \"0.7rem\",\r\n                                }}\r\n                              >\r\n                                (edited)\r\n                              </span>\r\n                            )}\r\n                          </Timestamp>\r\n                        </MessageHeader>\r\n                      )}\r\n\r\n                      {editingMessageId === message._id ? (\r\n                        <div>\r\n                          <EditInput\r\n                            value={editingContent}\r\n                            onChange={(e) => setEditingContent(e.target.value)}\r\n                            onKeyDown={(e) => {\r\n                              if (e.key === \"Enter\") {\r\n                                handleSaveEdit();\r\n                              } else if (e.key === \"Escape\") {\r\n                                handleCancelEdit();\r\n                              }\r\n                            }}\r\n                            theme={theme}\r\n                            autoFocus\r\n                          />\r\n                          <EditActions>\r\n                            <EditActionButton\r\n                              onClick={handleCancelEdit}\r\n                              theme={theme}\r\n                            >\r\n                              <FaTimes /> Cancel\r\n                            </EditActionButton>\r\n                            <EditActionButton\r\n                              onClick={handleSaveEdit}\r\n                              primary\r\n                              theme={theme}\r\n                            >\r\n                              <FaCheck /> Save\r\n                            </EditActionButton>\r\n                          </EditActions>\r\n                        </div>\r\n                      ) : (\r\n                        <div>\r\n                          {/* Show replied message if this is a reply */}\r\n                          {message.replyTo && (\r\n                            <ReplyMessagePreview theme={theme}>\r\n                              <div className=\"reply-username\">\r\n                                {messages.find((m) => m._id === message.replyTo)\r\n                                  ?.senderId?.username || \"Unknown\"}\r\n                              </div>\r\n                              <div className=\"reply-content\">\r\n                                {messages.find((m) => m._id === message.replyTo)\r\n                                  ?.content || \"Message not found\"}\r\n                              </div>\r\n                            </ReplyMessagePreview>\r\n                          )}\r\n                          <MessageContent\r\n                            isOwn={isOwnMessage}\r\n                            isSystem={message.messageType === \"system\"}\r\n                            theme={theme}\r\n                          >\r\n                            {message.content}\r\n                          </MessageContent>\r\n                        </div>\r\n                      )}\r\n\r\n                      {/* Message reactions - positioned directly under the message bubble */}\r\n                      {message.messageType !== \"system\" &&\r\n                        message.reactions &&\r\n                        message.reactions.heart > 0 && (\r\n                          <MessageReactions isOwn={isOwnMessage}>\r\n                            <ReactionButton theme={theme} title=\"Liked\">\r\n                              <FaHeart\r\n                                style={{ color: \"#e74c3c\", fontSize: \"16px\" }}\r\n                              />\r\n                            </ReactionButton>\r\n                          </MessageReactions>\r\n                        )}\r\n                    </MessageBubbleContainer>\r\n                  </Message>\r\n\r\n                  {/* Show actions for own messages only (not system messages) */}\r\n                  {isOwnMessage &&\r\n                    message.messageType !== \"system\" &&\r\n                    editingMessageId !== message._id && (\r\n                      <MessageActions className=\"message-actions\">\r\n                        <MessageActionButton\r\n                          onClick={() =>\r\n                            handleEditMessage(message._id, message.content)\r\n                          }\r\n                          theme={theme}\r\n                          title=\"Edit message\"\r\n                        >\r\n                          <FaEdit /> Edit\r\n                        </MessageActionButton>\r\n                        <MessageActionButton\r\n                          onClick={() => handleDeleteMessage(message._id)}\r\n                          theme={theme}\r\n                          className=\"danger\"\r\n                          title=\"Delete message\"\r\n                        >\r\n                          <FaTrash /> Delete\r\n                        </MessageActionButton>\r\n                      </MessageActions>\r\n                    )}\r\n                </MessageWrapper>\r\n              );\r\n            })\r\n          )}\r\n\r\n          <div ref={messagesEndRef} />\r\n        </MessagesContainer>\r\n\r\n        {typingUsers.length > 0 && (\r\n          <TypingIndicator theme={theme}>\r\n            {typingUsers.length === 1 ? (\r\n              <img\r\n                src={getAvatarImage(typingUsers[0].avatar)}\r\n                alt={`${typingUsers[0].username} avatar`}\r\n                style={{\r\n                  width: \"24px\",\r\n                  height: \"24px\",\r\n                  borderRadius: \"50%\",\r\n                  border: \"2px solid #007bff\",\r\n                  objectFit: \"cover\",\r\n                }}\r\n              />\r\n            ) : (\r\n              <div style={{ display: \"flex\", marginLeft: \"-8px\" }}>\r\n                {typingUsers.slice(0, 3).map((user, index) => (\r\n                  <img\r\n                    key={user.userId}\r\n                    src={getAvatarImage(user.avatar)}\r\n                    alt={`${user.username} avatar`}\r\n                    style={{\r\n                      width: \"20px\",\r\n                      height: \"20px\",\r\n                      borderRadius: \"50%\",\r\n                      border: \"2px solid #007bff\",\r\n                      objectFit: \"cover\",\r\n                      marginLeft: index > 0 ? \"-6px\" : \"0\",\r\n                      zIndex: 3 - index,\r\n                    }}\r\n                  />\r\n                ))}\r\n              </div>\r\n            )}\r\n            <TypingDots theme={theme}>\r\n              <span></span>\r\n              <span></span>\r\n              <span></span>\r\n            </TypingDots>\r\n            <span>\r\n              <strong>\r\n                {typingUsers.map((user) => user.username).join(\", \")}\r\n              </strong>{\" \"}\r\n              {typingUsers.length === 1 ? \"is\" : \"are\"} typing...\r\n            </span>\r\n          </TypingIndicator>\r\n        )}\r\n\r\n        <InputArea theme={theme}>\r\n          {replyingTo && (\r\n            <ReplyPreview theme={theme}>\r\n              <ReplyContent theme={theme}>\r\n                <div className=\"reply-to\">\r\n                  Replying to {replyingTo.username}\r\n                </div>\r\n                <div className=\"reply-message\">{replyingTo.content}</div>\r\n              </ReplyContent>\r\n              <ReplyCloseButton onClick={handleCancelReply} theme={theme}>\r\n                <FaTimes />\r\n              </ReplyCloseButton>\r\n            </ReplyPreview>\r\n          )}\r\n          <InputContainer>\r\n            <Input\r\n              type=\"text\"\r\n              value={newMessage}\r\n              onChange={handleInputChange}\r\n              onKeyDown={handleInputKeyDown}\r\n              placeholder={\r\n                replyingTo\r\n                  ? `Reply to ${replyingTo.username}...`\r\n                  : \"Type your message...\"\r\n              }\r\n              theme={theme}\r\n            />\r\n            <InputActions>\r\n              <ActionIcon theme={theme} title=\"Add emoji\">\r\n                <FaSmile />\r\n              </ActionIcon>\r\n              <ActionIcon theme={theme} title=\"Attach image\">\r\n                <FaImage />\r\n              </ActionIcon>\r\n            </InputActions>\r\n            <SendButton\r\n              onClick={handleSendMessage}\r\n              disabled={!newMessage.trim()}\r\n              theme={theme}\r\n            >\r\n              <FaPaperPlane />\r\n            </SendButton>\r\n          </InputContainer>\r\n        </InputArea>\r\n      </ChatArea>\r\n\r\n      {/* Context Menu */}\r\n      {contextMenu && (\r\n        <ContextMenuOverlay onClick={closeContextMenu}>\r\n          <ContextMenuContainer\r\n            theme={theme}\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            <MessagePreview theme={theme}>\r\n              <div className=\"preview-header\">\r\n                <img\r\n                  className=\"avatar\"\r\n                  src={getAvatarImage(contextMenu.message.senderId?.avatar)}\r\n                  alt={`${\r\n                    contextMenu.message.senderId?.username || \"User\"\r\n                  } avatar`}\r\n                />\r\n                <span className=\"username\">\r\n                  {contextMenu.message.senderId?.username || \"Unknown\"}\r\n                </span>\r\n                <span className=\"timestamp\">\r\n                  {new Date(\r\n                    contextMenu.message.timestamp ||\r\n                      contextMenu.message.createdAt\r\n                  ).toLocaleTimeString(\"en-US\", {\r\n                    hour: \"2-digit\",\r\n                    minute: \"2-digit\",\r\n                    hour12: true,\r\n                  })}\r\n                </span>\r\n              </div>\r\n              <div className=\"preview-content\">\r\n                {contextMenu.message.content}\r\n              </div>\r\n            </MessagePreview>\r\n\r\n            <ContextMenuGrid>\r\n              {contextMenuItems.map((item) => {\r\n                const Icon = item.icon;\r\n                const isOwn =\r\n                  contextMenu.message.senderId &&\r\n                  user &&\r\n                  (contextMenu.message.senderId._id === user.userId ||\r\n                    contextMenu.message.senderId === user.userId ||\r\n                    contextMenu.message.senderId.toString() ===\r\n                      user.userId.toString());\r\n\r\n                // Hide edit/delete for non-own messages\r\n                if ((item.id === \"edit\" || item.id === \"delete\") && !isOwn) {\r\n                  return null;\r\n                }\r\n\r\n                return (\r\n                  <ContextMenuItem\r\n                    key={item.id}\r\n                    theme={theme}\r\n                    danger={item.danger}\r\n                    primary={item.primary}\r\n                    onClick={() =>\r\n                      handleContextAction(item.id, contextMenu.message)\r\n                    }\r\n                  >\r\n                    <Icon />\r\n                    <span>{item.label}</span>\r\n                  </ContextMenuItem>\r\n                );\r\n              })}\r\n            </ContextMenuGrid>\r\n          </ContextMenuContainer>\r\n        </ContextMenuOverlay>\r\n      )}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default ChatRoom;\r\n"],"mappings":"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Ae;AAmDrB,MAAME,UAAU,GAAGhG,MAAM,CAACkC,GAAG;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,kBAAmBC,KAAK,IAAMA,KAAK,CAACC,KAAK,CAACC,MAAM,GAAG,SAAS,GAAG,SAAU;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAqBF,KAAK,IAAMA,KAAK,CAACC,KAAK,CAACC,MAAM,GAAG,MAAM,GAAG,MAAO;AACrE;AACA;AACA;AACA;AACA,oBAAqBF,KAAK,IAAMA,KAAK,CAACC,KAAK,CAACC,MAAM,GAAG,SAAS,GAAG,SAAU;AAC3E;AACA;AACA,CAAC;AAAC4D,IAAA,GApCID,UAAU;AAsChB,MAAME,SAAS,GAAGlG,MAAM,CAACkC,GAAG;AAC5B,gBAAiBC,KAAK,IAClBA,KAAK,CAACC,KAAK,CAACC,MAAM,GACd,iFAAiF,GACjF,uFAAuF;AAC/F;AACA;AACA;AACA,MAAOF,KAAK,IACNA,KAAK,CAACC,KAAK,CAACC,MAAM,GACd,uBAAuB,GACvB,0BAA0B;AACpC;AACA,gBAAiBF,KAAK,IAClBA,KAAK,CAACC,KAAK,CAACC,MAAM,GACd,+DAA+D,GAC/D,gEAAgE;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAC8D,IAAA,GA7BID,SAAS;AA+Bf,MAAME,cAAc,GAAGpG,MAAM,CAACkC,GAAG;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACmE,IAAA,GAfID,cAAc;AAiBpB,MAAME,KAAK,GAAGtG,MAAM,CAACiE,KAAK;AAC1B;AACA;AACA;AACA;AACA,MAAO9B,KAAK,IACNA,KAAK,CAACC,KAAK,CAACC,MAAM,GACd,uBAAuB,GACvB,0BAA0B;AACpC;AACA;AACA;AACA,gBAAiBF,KAAK,IAClBA,KAAK,CAACC,KAAK,CAACC,MAAM,GACd,+EAA+E,GAC/E,qFAAqF;AAC7F;AACA,WAAYF,KAAK,IAAMA,KAAK,CAACC,KAAK,CAACC,MAAM,GAAG,SAAS,GAAG,SAAU;AAClE;AACA;AACA,gBAAiBF,KAAK,IAClBA,KAAK,CAACC,KAAK,CAACC,MAAM,GACd,oCAAoC,GACpC,qCAAqC;AAC7C;AACA;AACA;AACA;AACA,kBAAmBF,KAAK,IAClBA,KAAK,CAACC,KAAK,CAACC,MAAM,GACd,sEAAsE,GACtE,uEAAuE;AACjF;AACA;AACA;AACA;AACA,aAAcF,KAAK,IAAMA,KAAK,CAACC,KAAK,CAACC,MAAM,GAAG,MAAM,GAAG,MAAO;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACkE,IAAA,GA9CID,KAAK;AAgDX,MAAME,UAAU,GAAGxG,MAAM,CAAC4C,MAAM;AAChC,gBAAiBT,KAAK,IAClBA,KAAK,CAACsE,QAAQ,GACVtE,KAAK,CAACC,KAAK,CAACC,MAAM,GAChB,MAAM,GACN,MAAM,GACR,mDAAmD;AAC3D;AACA;AACA;AACA;AACA,YAAaF,KAAK,IAAMA,KAAK,CAACsE,QAAQ,GAAG,aAAa,GAAG,SAAU;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAiBtE,KAAK,IAClBA,KAAK,CAACsE,QAAQ,GACV,MAAM,GACNtE,KAAK,CAACC,KAAK,CAACC,MAAM,GAClB,iEAAiE,GACjE,iEAAiE;AACzE;AACA;AACA;AACA,kBAAmBF,KAAK,IAClBA,KAAK,CAACC,KAAK,CAACC,MAAM,GACd,iEAAiE,GACjE,kEAAkE;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACqE,IAAA,GAlDIF,UAAU;AAoDhB,MAAMG,UAAU,GAAG3G,MAAM,CAACkC,GAAG;AAC7B;AACA;AACA;AACA;AACA;AACA,WAAYC,KAAK,IAAMA,KAAK,CAACC,KAAK,CAACC,MAAM,GAAG,MAAM,GAAG,MAAO;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA,kBAAmBF,KAAK,IAClBA,KAAK,CAACC,KAAK,CAACC,MAAM,GACd,mDAAmD,GACnD,mDAAmD;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACuE,IAAA,GA5BID,UAAU;AA8BhB,MAAME,YAAY,GAAG7G,MAAM,CAACkC,GAAG;AAC/B,gBAAiBC,KAAK,IAClBA,KAAK,CAACC,KAAK,CAACC,MAAM,GAAG,uBAAuB,GAAG,0BAA0B;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACyE,IAAA,GAvBID,YAAY;AAyBlB,MAAME,YAAY,GAAG/G,MAAM,CAACkC,GAAG;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAcC,KAAK,IAAMA,KAAK,CAACC,KAAK,CAACC,MAAM,GAAG,MAAM,GAAG,MAAO;AAC9D;AACA;AACA;AACA;AACA;AACA,CAAC;AAAC2E,IAAA,GAlBID,YAAY;AAoBlB,MAAME,gBAAgB,GAAGjH,MAAM,CAAC4C,MAAM;AACtC;AACA;AACA,WAAYT,KAAK,IAAMA,KAAK,CAACC,KAAK,CAACC,MAAM,GAAG,MAAM,GAAG,MAAO;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAmBF,KAAK,IAClBA,KAAK,CAACC,KAAK,CAACC,MAAM,GAAG,0BAA0B,GAAG,qBAAqB;AAC7E;AACA;AACA,CAAC;AAAC6E,IAAA,GAnBID,gBAAgB;AAqBtB,MAAME,cAAc,GAAGnH,MAAM,CAACkC,GAAG;AACjC;AACA,WAAYC,KAAK,IAAMA,KAAK,CAACuB,KAAK,GAAG,MAAM,GAAG,MAAO;AACrD,UAAWvB,KAAK,IAAMA,KAAK,CAACuB,KAAK,GAAG,MAAM,GAAG,MAAO;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAcvB,KAAK,IAAMA,KAAK,CAACiF,IAAI,GAAG,CAAC,GAAG,CAAE;AAC5C;AACA;AACA,CAAC;AAACC,IAAA,GAjBIF,cAAc;AAmBpB,MAAMG,mBAAmB,GAAGtH,MAAM,CAACkC,GAAG;AACtC,gBAAiBC,KAAK,IAClBA,KAAK,CAACC,KAAK,CAACC,MAAM,GAAG,uBAAuB,GAAG,0BAA0B;AAC7E;AACA;AACA;AACA;AACA;AACA,WAAYF,KAAK,IAAMA,KAAK,CAACC,KAAK,CAACC,MAAM,GAAG,MAAM,GAAG,MAAO;AAC5D;AACA;AACA,MAAOF,KAAK,IACNA,KAAK,CAACC,KAAK,CAACC,MAAM,GAAG,wBAAwB,GAAG,wBAAwB;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACkF,IAAA,GAtCID,mBAAmB;AAwCzB,MAAME,gBAAgB,GAAGxH,MAAM,CAACkC,GAAG;AACnC;AACA;AACA;AACA;AACA,qBAAsBC,KAAK,IAAMA,KAAK,CAACuB,KAAK,GAAG,UAAU,GAAG,YAAa;AACzE;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAC+D,IAAA,GAZID,gBAAgB;AActB,MAAME,cAAc,GAAG1H,MAAM,CAAC4C,MAAM;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAC+E,IAAA,GArCID,cAAc;AAuCpB,MAAME,YAAY,GAAG5H,MAAM,CAACkC,GAAG;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAC2F,IAAA,GATID,YAAY;AAWlB,MAAME,UAAU,GAAG9H,MAAM,CAAC4C,MAAM;AAChC;AACA;AACA,WAAYT,KAAK,IAAMA,KAAK,CAACC,KAAK,CAACC,MAAM,GAAG,MAAM,GAAG,MAAO;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAmBF,KAAK,IAClBA,KAAK,CAACC,KAAK,CAACC,MAAM,GAAG,0BAA0B,GAAG,qBAAqB;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAC0F,IAAA,GA3BID,UAAU;AA6BhB,MAAME,kBAAkB,GAAGhI,MAAM,CAACkC,GAAG;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAC+F,IAAA,GAtBID,kBAAkB;AAwBxB,MAAME,oBAAoB,GAAGlI,MAAM,CAACkC,GAAG;AACvC,gBAAiBC,KAAK,IAClBA,KAAK,CAACC,KAAK,CAACC,MAAM,GACd,mDAAmD,GACnD,mDAAmD;AAC3D;AACA;AACA,gBAAiBF,KAAK,IAClBA,KAAK,CAACC,KAAK,CAACC,MAAM,GACd,+DAA+D,GAC/D,gEAAgE;AACxE;AACA,MAAOF,KAAK,IACNA,KAAK,CAACC,KAAK,CAACC,MAAM,GAAG,0BAA0B,GAAG,qBAAqB;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAmBF,KAAK,IAAMA,KAAK,CAACC,KAAK,CAACC,MAAM,GAAG,MAAM,GAAG,MAAO;AACnE;AACA;AACA,CAAC;AAAC8F,IAAA,GA3CID,oBAAoB;AA6C1B,MAAME,eAAe,GAAGpI,MAAM,CAACkC,GAAG;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACmG,IAAA,GAfID,eAAe;AAiBrB,MAAME,eAAe,GAAGtI,MAAM,CAAC4C,MAAM;AACrC,gBAAiBT,KAAK,IAClBA,KAAK,CAACC,KAAK,CAACC,MAAM,GAAG,uBAAuB,GAAG,0BAA0B;AAC7E;AACA,MAAOF,KAAK,IACNA,KAAK,CAACC,KAAK,CAACC,MAAM,GACd,uBAAuB,GACvB,0BAA0B;AACpC,WAAYF,KAAK,IAAK;EAClB,IAAIA,KAAK,CAACoG,MAAM,EAAE,OAAO,SAAS;EAClC,IAAIpG,KAAK,CAACmC,OAAO,EAAE,OAAO,SAAS;EACnC,OAAOnC,KAAK,CAACC,KAAK,CAACC,MAAM,GAAG,SAAS,GAAG,SAAS;AACnD,CAAC;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAmBF,KAAK,IAAK;EACvB,IAAIA,KAAK,CAACoG,MAAM,EAAE,OAAO,wBAAwB;EACjD,IAAIpG,KAAK,CAACmC,OAAO,EAAE,OAAO,wBAAwB;EAClD,OAAOnC,KAAK,CAACC,KAAK,CAACC,MAAM,GACrB,uBAAuB,GACvB,0BAA0B;AAChC,CAAC;AACL;AACA,kBAAmBF,KAAK,IAClBA,KAAK,CAACC,KAAK,CAACC,MAAM,GACd,+BAA+B,GAC/B,gCAAgC;AAC1C,oBAAqBF,KAAK,IAAK;EACzB,IAAIA,KAAK,CAACoG,MAAM,EAAE,OAAO,wBAAwB;EACjD,IAAIpG,KAAK,CAACmC,OAAO,EAAE,OAAO,wBAAwB;EAClD,OAAOnC,KAAK,CAACC,KAAK,CAACC,MAAM,GACrB,uBAAuB,GACvB,0BAA0B;AAChC,CAAC;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACmG,IAAA,GAlEIF,eAAe;AAoErB,MAAMG,cAAc,GAAGzI,MAAM,CAACkC,GAAG;AACjC,gBAAiBC,KAAK,IAClBA,KAAK,CAACC,KAAK,CAACC,MAAM,GAAG,uBAAuB,GAAG,2BAA2B;AAC9E;AACA;AACA;AACA;AACA,MAAOF,KAAK,IACNA,KAAK,CAACC,KAAK,CAACC,MAAM,GACd,uBAAuB,GACvB,0BAA0B;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAgBF,KAAK,IAAMA,KAAK,CAACC,KAAK,CAACC,MAAM,GAAG,MAAM,GAAG,MAAO;AAChE;AACA;AACA;AACA;AACA,eAAgBF,KAAK,IAAMA,KAAK,CAACC,KAAK,CAACC,MAAM,GAAG,MAAM,GAAG,MAAO;AAChE;AACA;AACA;AACA;AACA;AACA,aAAcF,KAAK,IAAMA,KAAK,CAACC,KAAK,CAACC,MAAM,GAAG,SAAS,GAAG,SAAU;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACqG,IAAA,GAlDID,cAAc;AAoDpB,MAAME,eAAe,GAAG3I,MAAM,CAACkC,GAAG;AAClC;AACA;AACA;AACA,gBAAiBC,KAAK,IAClBA,KAAK,CAACC,KAAK,CAACC,MAAM,GACd,iFAAiF,GACjF,uFAAuF;AAC/F;AACA;AACA,MAAOF,KAAK,IACNA,KAAK,CAACC,KAAK,CAACC,MAAM,GACd,uBAAuB,GACvB,0BAA0B;AACpC;AACA;AACA;AACA;AACA,gBAAiBF,KAAK,IAClBA,KAAK,CAACC,KAAK,CAACC,MAAM,GACd,+BAA+B,GAC/B,+BAA+B;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAWF,KAAK,IACNA,KAAK,CAACC,KAAK,CAACC,MAAM,GACd,0BAA0B,GAC1B,oBAAoB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAkBF,KAAK,IAAMA,KAAK,CAACC,KAAK,CAACC,MAAM,GAAG,SAAS,GAAG,SAAU;AACxE;AACA;AACA;AACA;AACA;AACA,iBAAkBF,KAAK,IAAMA,KAAK,CAACC,KAAK,CAACC,MAAM,GAAG,MAAM,GAAG,MAAO;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AA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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}